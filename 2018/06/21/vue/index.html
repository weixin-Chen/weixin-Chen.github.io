<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-corner-indicator.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="vue," />










<meta name="description" content="vue.js中文文档 下载vue.js源码兼容性Vue.js 不支持 IE8 及其以下版本，因为 Vue.js 使用的 ECMAScript 5 特性在 IE8 无法模拟。Vue.js 支持所有兼容 ECMAScript 5 的浏览器。object.defineProperty(es5)的没有替代的方案 不支持ie8&amp;lt;= vue概述vue.js (读音/vju:/,类似view)是一套构建用">
<meta name="keywords" content="vue">
<meta property="og:type" content="article">
<meta property="og:title" content="vue">
<meta property="og:url" content="http://yoursite.com/2018/06/21/vue/index.html">
<meta property="og:site_name" content="wecy-chen blog">
<meta property="og:description" content="vue.js中文文档 下载vue.js源码兼容性Vue.js 不支持 IE8 及其以下版本，因为 Vue.js 使用的 ECMAScript 5 特性在 IE8 无法模拟。Vue.js 支持所有兼容 ECMAScript 5 的浏览器。object.defineProperty(es5)的没有替代的方案 不支持ie8&amp;lt;= vue概述vue.js (读音/vju:/,类似view)是一套构建用">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/mvvm.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/checkbox.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/watch.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/nexttick.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/refs.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/template.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/component.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/cData.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/sComponent.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/cC.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/moment.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/momentP.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/plugin2.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/plugin.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/plugin3.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/directive.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/slot.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/插槽.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/作用域插槽.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/transition2.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/transitions.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/transition.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/transitions-demo.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/动画函数.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/多个动画.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/animate.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/Velocity.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/props.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/eslint.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/代理.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/打包.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/web_path.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/--report.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/date-fns.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/21/vue/其他.jpg">
<meta property="og:updated_time" content="2018-08-21T13:44:27.922Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vue">
<meta name="twitter:description" content="vue.js中文文档 下载vue.js源码兼容性Vue.js 不支持 IE8 及其以下版本，因为 Vue.js 使用的 ECMAScript 5 特性在 IE8 无法模拟。Vue.js 支持所有兼容 ECMAScript 5 的浏览器。object.defineProperty(es5)的没有替代的方案 不支持ie8&amp;lt;= vue概述vue.js (读音/vju:/,类似view)是一套构建用">
<meta name="twitter:image" content="http://yoursite.com/2018/06/21/vue/mvvm.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/21/vue/"/>





  <title>vue | wecy-chen blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/wecy-chen" class="github-corner" aria-label="View source on Github">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>
    <style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wecy-chen blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>
    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/21/vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wecy-chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wecy-chen blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">vue</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-21T20:29:58+08:00">
                2018-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/06/21/vue/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/06/21/vue/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读数 <i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  13,130
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  63
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="vue-js"><a href="#vue-js" class="headerlink" title="vue.js"></a>vue.js</h1><p><a href="https://vuefe.cn/v2/guide/" target="_blank" rel="noopener">中文文档</a></p>
<p><a href="https://vuejs.org/js/vue.js" target="_blank" rel="noopener">下载vue.js源码</a><br><strong>兼容性</strong><br>Vue.js 不支持 IE8 及其以下版本，因为 Vue.js 使用的 ECMAScript 5 特性在 IE8 无法模拟。Vue.js 支持所有兼容 ECMAScript 5 的浏览器。<br>object.defineProperty(es5)的没有替代的方案 不支持ie8&lt;=</p>
<p><strong>vue概述</strong><br>vue.js (读音/vju:/,类似view)是一套构建用户页面的渐进式框架</p>
<p><strong>vue的特点</strong><br>· 核心只关注视图层(view)<br>· 易学,轻量,灵活的特点<br>· 适用于移动端项目<br>· 渐进式框架</p>
<p><strong>框架和库</strong><br>-库 jquery underscore zepto animate.css 我们调用他 主动<br>-框架 vue 拥有完整的解决方案 我们写好人家调用我 被动<br>vue是一个mvvm框架(库)、和angular类似比较容易上手、小巧</p>
<p><img src="/2018/06/21/vue/mvvm.jpg" alt="mvvm"></p>
<ul>
<li><p>mvc (backbone)单向 model view controller</p>
</li>
<li><p>MVVM(angular,vue)双向<br><strong>model数据 view视图 viewModel(视图模型)</strong></p>
</li>
</ul>
<p><strong>vue数据驱动</strong>(主要操作的是数据)<br>-以前操作DOM</p>
<p>js数据的类型 Vue 操作类型<br>基本 number String boolean null undefined<br>-Object func..<br>-Symbol(es6)<br>{} []</p>
<h2 id="cdn"><a href="#cdn" class="headerlink" title="cdn"></a>cdn</h2><p>我们推荐链接到一个你可以手动更新的指定版本号：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="vue和angular区别"><a href="#vue和angular区别" class="headerlink" title="vue和angular区别?"></a>vue和angular区别?</h2><p>vue——简单、易学指令以 v-xxx一片html代码配合上json，在new出来vue实例个人维护项目适合: 移动端项目,小巧vue的发展势头很猛，github上start数量已经超越angular<br>    angular——上手难<br>        指令以 ng-xxx<br>        所有属性和方法都挂到$scope身上<br>        angular由google维护<br>        合适: pc端项目<br>    共同点: 不兼容低版本IE</p>
<h2 id="什么是bower"><a href="#什么是bower" class="headerlink" title="什么是bower?"></a>什么是bower?</h2><p>Bower是一个客户端技术的软件包管理器，它可用于搜索、安装和卸载如JavaScript、HTML、CSS之类的网络资源。其他一些建立在Bower基础之上的开发工具，如YeoMan和Grunt，这个会在以后的文章中介绍。<br>npm install -g bower<br>bower install vue  (包名)  生成bower_components/vue目录<br>bower uninstall vue<br>bower info vue (版本信息)<br>bower install vue#2.0.8 (安装对应版本)</p>
<p>下载 animate.css<br>bower install animate.css</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--moustache  小胡子语法 表达式 可以放赋值 取值 三元--&gt;</span></span><br><span class="line">  &#123;&#123;msg&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./node_modules/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//引入一个vue构造函数</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> vm=<span class="keyword">new</span> Vue(&#123; <span class="comment">//vm == viewmodel</span></span></span><br><span class="line"><span class="javascript">    el:<span class="string">"#app"</span>,<span class="comment">//querySelector</span></span></span><br><span class="line"><span class="javascript">    data:&#123; <span class="comment">//data中的数据会被vm所代理</span></span></span><br><span class="line"><span class="javascript">      msg:<span class="string">'hello world!'</span><span class="comment">//内容</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;); <span class="comment">//object.defineProperty</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="DOM指令"><a href="#DOM指令" class="headerlink" title="DOM指令"></a>DOM指令</h2><ul>
<li><code>v-model</code>    一般表单元素(input)    双向数据绑定 <code>.number</code>指定数字类型</li>
<li><code>v-text</code> 防止页面出现 <code>{</code>{}<code>}</code></li>
<li><code>v-once</code> 只绑定第一次</li>
<li><code>v-html</code>把html字符当做html渲染,一定是可信任的html元素 如data中<p>元素 </p></li>
<li><code>v-bloak</code> 解决闪烁,基本不采用,要加样式<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">	<span class="selector-attr">[v-cloak]</span>&#123;<span class="attribute">display</span>:none;&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">v-cloak</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="v-model-的修饰符"><a href="#v-model-的修饰符" class="headerlink" title="v-model 的修饰符"></a>v-model 的修饰符</h3><p>来自官网的例子：</p>
<ul>
<li>1.number<br>如果想自动将用户的输入值转为数值类型，可以给 v-model 添加 number 修饰符：<br><code>&lt;input v-model.number=&quot;age&quot; type=&quot;number&quot;&gt;</code><br>这通常很有用，因为即使在 type=”number” 时，HTML 输入元素的值也总会返回字符串。</li>
<li>2.trim<br>如果要自动过滤用户输入的首尾空白字符，可以给 v-model 添加 trim 修饰符：<br><code>&lt;input v-model.trim=&quot;msg&quot;&gt;</code><br>3.lazy<br>在默认情况下，v-model 在每次 input 事件触发后将输入框的值与数据进行同步 。你可以添加 lazy 修饰符，从而转变为使用 change 事件进行同步(当输入框失去焦点)：<br>在“change”时而非“input”时更新<br><code>&lt;input v-model.lazy=&quot;msg&quot; &gt;</code><h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3></li>
<li><code>v-for</code> 循环(数组,对象,字符串,数字)<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">'value in/of 数组'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">'(value,index) in/of 数组'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>循环: 要循环谁就在谁的身上加v-for属性<br>    <code>v-for=&quot;name in arr&quot;</code><br>      <code>{</code>{$index}<code>}</code> //1.0 才有现在2.0没了</p>
<pre><code>`v-for=&quot;name in json&quot;`
  `{`{$index`}}`  `{`{$key`}}`

`v-for=&quot;(k,v) in json&quot;`
</code></pre><p>Vue 2.0<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in arr"</span> <span class="attr">:key</span>=<span class="string">"item.id"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>index:&#123;&#123;index&#125;&#125;/ item:&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"(value,key,index) in obj"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>index:&#123;&#123;index&#125;&#125;/ &#123;&#123;key&#125;&#125;:&#123;&#123;value&#125;&#125;,<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">'(value,index) in arr'</span> <span class="attr">:key</span>=<span class="string">"value.id"</span> <span class="attr">:class</span>=<span class="string">"&#123;'active':index==1&#125;"</span>&gt;</span> index 为1 加class</span><br></pre></td></tr></table></figure></p>
<p>  2.0里面默认就可以添加重复数据<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>  去掉了隐式一些变量<br>    <code>$index</code>  <code>$key</code></p>
<p>  之前:<br>    <code>v-for=&quot;(index,val) in array&quot;</code><br>  现在:<br>    <code>v-for=&quot;(val,index) in array&quot;</code></p>
<ul>
<li><p><code>v-on</code><br>事件 v-on(@)<br>绑定给DOM元素,函数需要定义在methods中,不能和data里的内容重名,this指向的是实例,不能使用箭头函数,事件源对象如果不写括号,可以自动传入,否则只能手动传入$event</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @事件名=<span class="string">'fn'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>v-bind</code><br>v-bind:动态绑定数据</p>
</li>
<li><p><code>v-if</code> <code>v-show</code><br>if操作的是dom show操作的是样式<br>如果频繁的切换dom 使用v-show<br>但数据一开始就确定下来就使用v-if更好开始</p>
</li>
</ul>
<h2 id="属性和方法"><a href="#属性和方法" class="headerlink" title="属性和方法"></a>属性和方法</h2><h3 id="data"><a href="#data" class="headerlink" title="data"></a>data</h3><p><code></code>  <code>data:{a:{}}</code><br>vue会循环data中的数据(数据劫持)依次会增加setter和getter<br>使用变量时,先要初始化,否则新加的属性不会导致页面刷新<br>方法:</p>
<ol>
<li><code>a:{school:&#39;&#39;}</code></li>
<li><code>vm.$set(vm.a,&#39;school&#39;,&#39;fuming&#39;)</code>给对象添加响应式的数据变化</li>
<li><code>vm.a={school:&#39;xxxx&#39;,age:8}</code>替换原对象</li>
</ol>
<p><strong>数组</strong><br><code>vm.arr[0]=10</code> 错误<br>去改变数组中的某一项式监控不到的,也不能使用改变数组长度的方法 <code>vm.arr.length-=2</code><br>可以 变异方法:<code>pop</code> <code>push</code> <code>shift</code> <code>unshift</code> <code>sort</code> <code>reserve</code> <code>splice</code><br><code>vm.arr=vm.arr.map(item=&gt;item+=3)</code> //filter map也可以</p>
<h3 id="数组和对象的注意事项"><a href="#数组和对象的注意事项" class="headerlink" title="数组和对象的注意事项"></a>数组和对象的注意事项</h3><p><strong>数组</strong></p>
<p>由于 JavaScript 的限制，Vue 不能检测以下变动的数组：</p>
<p>当你利用索引直接设置一个项时，例如：vm.items[indexOfItem] = newValue<br>当你修改数组的长度时，例如：vm.items.length = newLength<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    items: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">vm.items[<span class="number">1</span>] = <span class="string">'x'</span> <span class="comment">// 不是响应性的</span></span><br><span class="line">vm.items.length = <span class="number">2</span> <span class="comment">// 不是响应性的</span></span><br></pre></td></tr></table></figure></p>
<p>为了解决第一类问题，以下两种方式都可以实现和 <code>vm.items[indexOfItem] = newValue</code>相同的效果，同时也将触发状态更新：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.Vue.set</span></span><br><span class="line">Vue.set(vm.items, indexOfItem, newValue)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.Array.prototype.splice</span></span><br><span class="line">vm.items.splice(indexOfItem, <span class="number">1</span>, newValue)</span><br></pre></td></tr></table></figure>
<p>你也可以使用 vm.$set 实例方法，该方法是全局方法 Vue.set 的一个别名：<br><code>vm.$set(vm.items, indexOfItem, newValue)</code><br>为了解决第二类问题，你可以使用 splice：<br><code>vm.items.splice(newLength)</code></p>
<p><strong>对象</strong><br>Vue 不能检测对象属性的添加或删除：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    a: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// `vm.a` 现在是响应式的</span></span><br><span class="line"></span><br><span class="line">vm.b = <span class="number">2</span></span><br><span class="line"><span class="comment">// `vm.b` 不是响应式的</span></span><br></pre></td></tr></table></figure></p>
<p>对于已经创建的实例，Vue 不能动态添加根级别的响应式属性。<br>但是，可以使用 <code>Vue.set(object, key, value)</code> 方法向嵌套对象添加响应式属性。例如，对于：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    userProfile: &#123;</span><br><span class="line">      name: <span class="string">'Anika'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//你可以添加一个新的 age 属性到嵌套的 userProfile 对象：</span></span><br><span class="line">Vue.set(vm.userProfile, <span class="string">'age'</span>, <span class="number">27</span>)</span><br></pre></td></tr></table></figure></p>
<p>你还可以使用 vm.$set 实例方法，它只是全局 Vue.set 的别名：<br><code>vm.$set(vm.userProfile, &#39;age&#39;, 27)</code><br>有时你可能需要为已有对象赋予多个新属性，比如使用 Object.assign() 或 _.extend()。在这种情况下，你应该用两个对象的属性创建一个新的对象。<br>所以，如果你想添加新的响应式属性，不要像这样：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(vm.userProfile, &#123;</span><br><span class="line">  age: <span class="number">27</span>,</span><br><span class="line">  favoriteColor: <span class="string">'Vue Green'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>你应该这样做：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vm.userProfile = <span class="built_in">Object</span>.assign(&#123;&#125;, vm.userProfile, &#123;</span><br><span class="line">  age: <span class="number">27</span>,</span><br><span class="line">  favoriteColor: <span class="string">'Vue Green'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h3><p><strong>computed计算”属性” 不是方法</strong></p>
<ul>
<li>方法不会有缓存,computed会依据依赖(归vue管理的数据,可以响应式变化的)的属性进行缓存</li>
<li>两部分组成有get和set(不能只写set)<br>一般情况下,通过js赋值影响其他人或者表单元素设置值的时候会调用set方法<br>get 必须return 不支持异步操作</li>
</ul>
<p>复选框<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  全选 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">'checkAll'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-for</span>=<span class="string">"product in products"</span> <span class="attr">v-model</span>=<span class="string">"product.ischeck"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'node_modules/vue/dist/vue.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm=<span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    computed:&#123;</span><br><span class="line">        checkAll:&#123;</span><br><span class="line">          get()&#123; <span class="comment">//返回什么结果,就会赋予给checkAll属性</span></span><br><span class="line">             <span class="keyword">return</span> <span class="keyword">this</span>.products.every(<span class="function"><span class="params">item</span>=&gt;</span>item.ischeck)</span><br><span class="line">            &#125;,</span><br><span class="line">            set(val)&#123; <span class="comment">//val是给checkAll 赋予值的时候传递过来的</span></span><br><span class="line">              <span class="keyword">this</span>.products.forEach(<span class="function"><span class="params">item</span>=&gt;</span>item.ischeck=val)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    el:<span class="string">'#app'</span>,</span><br><span class="line">    data:&#123;<span class="comment">//length渲染复选框的个数</span></span><br><span class="line">        products:[&#123;<span class="attr">ischeck</span>:<span class="literal">true</span>&#125;,&#123;<span class="attr">ischeck</span>:<span class="literal">true</span>&#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><img src="/2018/06/21/vue/checkbox.jpg" alt="checkbox"></p>
<ul>
<li>注意computed里面可以放置一些业务逻辑代码，一定记得return<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>computed:&#123;</span><br><span class="line">    <span class="comment">// 有缓存依赖 如果说value没有发生变化,</span></span><br><span class="line">    多次访问 comValue 都只会返回之前计算的结果,不会再次执行函数</span><br><span class="line">    comValue: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'computed'</span>) <span class="comment">//默认调用get</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.value * <span class="number">2</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>computed:&#123;</span><br><span class="line">	 b:&#123;</span><br><span class="line">		get()&#123;&#125;</span><br><span class="line">		set()&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm=<span class="keyword">new</span>  Vue(&#123;</span><br><span class="line">    el:<span class="string">'#app'</span>,</span><br><span class="line">    data:&#123;<span class="attr">a</span>:<span class="string">''</span>,<span class="attr">msg</span>:<span class="string">''</span>&#125;,</span><br><span class="line">    watch:&#123; <span class="comment">// 只有值变化的时候才会触发,支持异步,其他情况一般使用computed</span></span><br><span class="line">      a(newVal,oldVal)&#123; <span class="comment">// watch的属性名字要和观察的人的名字一致</span></span><br><span class="line">        <span class="keyword">this</span>.msg=<span class="string">'..................'</span></span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(newVal.length)</span><br><span class="line">          <span class="keyword">if</span>(newVal.length&lt;<span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.msg=<span class="string">'太少'</span>  <span class="comment">//vm.$data.a='12'</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span>(newVal.length&gt;<span class="number">6</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.msg=<span class="string">'太多'</span> <span class="comment">// vm.$data.a='1234567'</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">this</span>.msg=<span class="string">''</span></span><br><span class="line">        &#125;,<span class="number">2000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>另一种方法<br>类型：<span style="color: red">{ [key: string]: string | Function | Object | Array }</span><br><img src="/2018/06/21/vue/watch.jpg" alt="watch"></p>
<h2 id="vue实例-属性"><a href="#vue实例-属性" class="headerlink" title="vue实例$属性"></a>vue实例$属性</h2><p><strong>组件树</strong><br> <code>$parent</code>：用来访问组件实例的父实例<br> <code>$root</code>: 用来访问当前组件树的根实例<br> <code>$children</code>:用来访问当前组件实例的直接子组件实例<br> <code>$refs</code>:用来访问ref指令的子组件<br><strong>DOM访问</strong><br> <code>$el</code>：用来挂载当前组件实例的dom元素<br> <code>$els</code>：用来访问$el元素中使用了v-el指令的DOM元素<br><strong>数据访问</strong><br> <code>$data</code>：用来访问组件实例观察的数据对象<br> <code>$options</code>：用来访问组件实例化时的初始化选项对象<br><strong>DOM方法的使用</strong><br> <code>$appendTo(elementOrSelector, callback)</code>：将el所指的DOM元素插入目标元素<br> <code>$before(elementOrSelector, callback)</code>：将el所指的DOM元素或片段插入目标元素之前<br> <code>$after(elementOrSelector, callback)</code>：将el所指的DOM元素或片段插入目标元素之后<br> <code>$remove(callback)</code>：将el所指的DOM元素或片段从DOM中删除<br> <code>$nextTick(callback)</code>：用来在下一次DOM更新循环后执行指定的回调函数<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// vue 的 渲染过程是异步的</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/ecmascript-6"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      text: 0</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  mounted()&#123;</span></span><br><span class="line"><span class="javascript">    setInterval(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text +=<span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text +=<span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text +=<span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text +=<span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.text +=<span class="number">1</span>;</span></span><br><span class="line"><span class="undefined">    &#125;,1000)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>可以看到text值的变化是0 5 10 15 … 而并没有出现 0 1 2 3 … 这样连续的变化</p>
<p><strong>event方法的使用</strong></p>
<ul>
<li><p>1.监听</p>
<p>$on(event, callback)：监听实例的自定义事件<br>$once(event, callback)：同上，但只能触发一次<br>$watch(property,callback(new, old)): 监听属性的变化，拿到变化前后的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种写法</span></span><br><span class="line">watch: &#123;</span><br><span class="line">  text(<span class="keyword">new</span>, old) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">new</span>&#125;</span>：<span class="subst">$&#123;old&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 第二种写法</span></span><br><span class="line"><span class="keyword">const</span> unWatch = <span class="keyword">this</span>.$watch(<span class="string">'text'</span>,(<span class="keyword">new</span>,old)=&gt;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">new</span>&#125;</span>：<span class="subst">$&#123;old&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 2秒后销毁 unWatch</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">  unWatch();</span><br><span class="line">&#125;,<span class="number">2000</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>// 两种写法的结果一样，只是第二种需要在组件销毁手动销毁$watch</p>
<ul>
<li><p>2.触发</p>
<p><code>$dispatch(event,args)</code>：派发事件，先在当前实例触发，再沿父链一层层向上，对应的监听函数返回false停止<br><code>$broadcast(event,args)</code>：广播事件，遍历当前实例的$children，如果对应的监听函数返回false，就停止<br><code>$emit(event, args)</code>：触发事件</p>
</li>
<li><p>3.删除</p>
<p><code>$off</code>(event, callback)：删除时间监听</p>
</li>
<li><p>4.其他</p>
<p><code>$forceUpdate()</code>：强制组件刷新<br><code>$set(ele,attr,value)</code>：给对象设置属性<br><code>$delete(ele,attr,value)</code>：删除对象属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;obj.a&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      obj:&#123;&#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  mounted()&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> i = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">    setInterval(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">      i++;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 第一种</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.obj.a = i ;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// obj.a没有定义，vue是无法监听到这个属性的变化，</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//所以页面的值也不会变化，这时可以用$forceUpdate进行强制渲染，当然不推荐这种用法</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$forceUpdate();</span></span><br><span class="line"><span class="undefined">      </span></span><br><span class="line"><span class="javascript">      <span class="comment">// 第二种</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$set(<span class="keyword">this</span>.obj,<span class="string">'a'</span>,i);</span></span><br><span class="line"><span class="undefined">    &#125;,1000)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>vue实例简单方法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        test: <span class="literal">false</span>,</span><br><span class="line">        arr:[<span class="string">'一'</span>,<span class="string">'二'</span>,<span class="string">'三'</span>,<span class="string">'四'</span>],</span><br><span class="line">        obj:&#123;<span class="attr">one</span>:<span class="string">'壹'</span>,<span class="attr">two</span>:<span class="string">'贰'</span>,<span class="attr">three</span>:<span class="string">'叁'</span>&#125;,</span><br><span class="line">       &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>  <code>vm.$el</code>  -&gt;  就是元素<br>  <code>vm.$data</code>  -&gt;  就是data   vm.a<br>  <code>vm.$mount</code> -&gt;  手动挂在vue程序 DOM <code>vm.$mount(‘#app’)</code><br>  <code>vm.$options</code> -&gt;   获取自定义属性<br>  <code>vm.$destroy</code> -&gt;   销毁对象<br>  <code>vm.$log();</code>  -&gt;  查看现在数据的状态 data里的数据</p>
<h3 id="nextTick"><a href="#nextTick" class="headerlink" title="$nextTick"></a>$nextTick</h3><p><img src="/2018/06/21/vue/nexttick.jpg" alt="nexttick.jpg"></p>
<p>异步方法,等待渲染DOM完成来获取vm</p>
<p>$refs 获取DOM元素  <code>ref=’mydiv’</code>属性<br>用v-for 可以获取多个DOM元素<br><img src="/2018/06/21/vue/refs.jpg" alt="refs.jpg"></p>
<p>子组件和父组件同时拥有mounted方法 会先走谁？<br>需要等待子组件挂载完成后在触发父组件的挂载</p>
<p>父组件调用子组件的方法<br><code>&lt;loading ref=&quot;load&quot;&gt;&lt;/loading&gt;</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mounted()&#123; <span class="comment">// ref 如果放在组件上 获取的是组件的实例 并不是组件的dom元素</span></span><br><span class="line">    <span class="comment">// this.$refs.load.hide()</span></span><br><span class="line">    <span class="comment">// this.$refs.load.$el.style.background = 'red'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><ul>
<li><p>@事件.stop<br>阻止冒泡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e.cancelBubble=<span class="literal">true</span></span><br><span class="line">e.stopPropagation();</span><br><span class="line">@click.stop <span class="comment">//vue</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>@事件.capture<br>事件捕获</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.capture</span>=<span class="string">'parent'</span>&gt;</span> 从上往下</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>@事件.once<br>@事件.self<br>v-on:click=”函数”<br>v-on:click/mouseout/mouseover/dblclick/mousedown…..<br>简写: @click=’<br>事件对象:@click=’show()’<br>事件冒泡:<br>    阻止冒泡:<br>      a). ev.cancelBubble=true/e.stopPropagation();<br>      b). @click.stop 推荐<br>默认行为(默认事件):<br>    阻止默认行为:<br>      a). ev.preventDefault();<br>      b). @contextmenu.prevent  推荐<br>      c).returnValue=false<br>    (以前)e.secElement&amp;&amp;e.target 判断事件源<br><strong>键盘事件</strong><br>@keydown  $event  ev.keyCode 键码<br>    @keyup<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">常用键:</span><br><span class="line">  回车</span><br><span class="line">    a). @keyup<span class="number">.13</span></span><br><span class="line">    b). @keyup.enter</span><br><span class="line">  上、下、左、右</span><br><span class="line">    @keyup/keydown.left</span><br><span class="line">    @keyup/keydown.right</span><br><span class="line">    @keyup/keydown.up</span><br><span class="line">    @keyup/keydown.down</span><br></pre></td></tr></table></figure></p>
<p><strong>自定义键盘指令</strong><br>  之前：<code>Vue.directive(&#39;on&#39;).keyCodes.f1=17</code>;  </p>
<p>  现在:  <code>Vue.config.keyCodes.ctrl=17</code>  <code>&lt;input type=&quot;text&quot; @keyup.ctrl=&quot;change&quot;&gt;</code></p>
<h2 id="todo练习"><a href="#todo练习" class="headerlink" title="todo练习"></a>todo练习</h2><p>todolist完整版<br><a href="https://wecy-chen.github.io/vue-demo/todolist/todoList.html" target="_blank" rel="noopener">在线预览</a><br><a href="https://github.com/wecy-chen/vue-demo/tree/master/todolist" target="_blank" rel="noopener">源码</a><br>todolist部分代码<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keyup.enter</span>=<span class="string">"add"</span> <span class="attr">v-model</span>=<span class="string">"val"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(a,index) in arr"</span>&gt;</span>&#123;&#123;a&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"remove(index)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> vm=<span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el:<span class="string">"#app"</span>,</span></span><br><span class="line"><span class="javascript">    methods: &#123; <span class="comment">//数组添加,删除筛选</span></span></span><br><span class="line"><span class="javascript">      add() &#123;<span class="keyword">this</span>.arr.unshift(<span class="keyword">this</span>.val);<span class="keyword">this</span>.val = <span class="string">''</span>&#125;,</span></span><br><span class="line"><span class="javascript">      remove(i) &#123;<span class="keyword">this</span>.arr = <span class="keyword">this</span>.arr.filter(<span class="function">(<span class="params">item,index</span>) =&gt;</span> index !== i)&#125;&#125;,</span></span><br><span class="line"><span class="undefined">    data:&#123;</span></span><br><span class="line"><span class="undefined">      arr:[],</span></span><br><span class="line"><span class="javascript">      val:<span class="string">""</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="绑定属性的写法"><a href="#绑定属性的写法" class="headerlink" title="绑定属性的写法"></a>绑定属性的写法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">v-bind:src=<span class="string">""</span></span><br><span class="line">    width/height/title....</span><br><span class="line">  </span><br><span class="line">  简写:</span><br><span class="line">  :src=<span class="string">""</span> 推荐</span><br><span class="line"></span><br><span class="line">  &lt;img src=<span class="string">"&#123;&#123;url&#125;&#125;"</span> alt=<span class="string">""</span>&gt;  效果能出来，但是会报一个<span class="number">404</span>错误</span><br><span class="line">  &lt;img v-bind:src=<span class="string">"url"</span> alt=<span class="string">""</span>&gt; 效果可以出来，不会发<span class="number">404</span>请求</span><br><span class="line">class和style:</span><br><span class="line">  :<span class="class"><span class="keyword">class</span></span>=<span class="string">""</span> v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">""</span></span><br><span class="line">  :style=<span class="string">""</span> v-bind:style=<span class="string">""</span></span><br><span class="line"></span><br><span class="line">  :<span class="class"><span class="keyword">class</span></span>=<span class="string">"[red]"</span>  red是数据</span><br><span class="line">  :<span class="class"><span class="keyword">class</span></span>=<span class="string">"[red,b,c,d]"</span></span><br><span class="line">  </span><br><span class="line">  :<span class="class"><span class="keyword">class</span></span>=<span class="string">"&#123;red:a, blue:false&#125;"</span> 生效的条件</span><br><span class="line"></span><br><span class="line">  :<span class="class"><span class="keyword">class</span></span>=<span class="string">"json"</span></span><br><span class="line">    </span><br><span class="line">    data:&#123;</span><br><span class="line">      json:&#123;<span class="attr">red</span>:a, <span class="attr">blue</span>:<span class="literal">false</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  --------------------------</span><br><span class="line">data:&#123;</span><br><span class="line">      c:&#123;<span class="attr">backgroundColor</span>:<span class="string">'red’&#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  style:</span></span><br><span class="line"><span class="string">  :style="[c]"</span></span><br><span class="line"><span class="string">  :style="[c,d]"</span></span><br><span class="line"><span class="string">    注意:  复合样式，采用驼峰命名法</span></span><br><span class="line"><span class="string">  :style="json" 官方推荐</span></span><br></pre></td></tr></table></figure>
<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><p><img src="/2018/06/21/vue/template.jpg" alt="template"></p>
<p><strong>vue 各版本</strong><br>Vue1.0<br><code></code> 数据更新模板变化<br><code>&lt;input v-model=’msg’/&gt;</code><br><code>{</code>{*msg}<code>}</code> 数据只绑定一次<br><code>{</code>{<code>{msg}</code>}<code>}</code> HTML转意输出  <code>&lt;h1&gt;&lt;/h1&gt;</code></p>
<p>vue2.0:<br>  bower info vue 查看版本<br>  <a href="http://vuejs.org/" target="_blank" rel="noopener">http://vuejs.org/</a><br>到了2.0以后，有哪些变化?</p>
<ol>
<li><p>在每个组件模板，不在支持片段代码<br>组件中模板:<br> 之前:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>我是加粗标签<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 现在:  必须有根元素，包裹住所有的代码<br> DOM:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"aaa"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">strong</span>&gt;</span>我是加粗标签<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">my-aaa</span>&gt;</span></span><br><span class="line">        &#123;&#123;msg&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'my-aaa'</span>,&#123;</span><br><span class="line">            template:<span class="string">'#aaa'</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"> <span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el:<span class="string">'#box'</span>,</span><br><span class="line">      data:&#123;</span><br><span class="line">        msg:<span class="string">'welcome vue2.0'</span></span><br><span class="line">    &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">也可以这样写:</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  ....</span><br><span class="line">&#125;).$mount(<span class="string">'#box'</span>)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>关于组件定义<br>Vue.extend  这种方式，在2.0里面有，但是有一些改动，这种写法，即使能用，咱也不用——废弃</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(组件名称,&#123;  在<span class="number">2.0</span>继续能用</span><br><span class="line">  data()&#123;&#125;</span><br><span class="line">  methods:&#123;&#125;</span><br><span class="line">  template:</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>2.0推出一个组件，简洁定义方式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Home=&#123;</span><br><span class="line">  template:<span class="string">''</span>   -&gt;   Vue.extend()</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="vue-extend"><a href="#vue-extend" class="headerlink" title="vue.extend"></a>vue.extend</h2><p>Vue2.0<br>vue.component是定义并且注册一个组件，vue.extend是定义一个组件，然后用vue.component来注册，文档说的很明确了，vue.component的时候会在背后自动调用vue.extend</p>
<ul>
<li>使用基础 Vue 构造器，创建一个“子类”。参数是一个包含组件选项的对象。</li>
<li>data 选项是特例，需要注意 - 在 Vue.extend() 中它必须是函数</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mount-point"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建构造器</span></span><br><span class="line"><span class="keyword">var</span> Profile = Vue.extend(&#123;</span><br><span class="line">  template: <span class="string">'&lt;p&gt;&#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125; aka &#123;&#123;alias&#125;&#125;&lt;/p&gt;'</span>,</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      firstName: <span class="string">'Walter'</span>,</span><br><span class="line">      lastName: <span class="string">'White'</span>,</span><br><span class="line">      alias: <span class="string">'Heisenberg'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 创建 Profile 实例，并挂载到一个元素上。</span></span><br><span class="line"><span class="keyword">new</span> Profile().$mount(<span class="string">'#mount-point'</span>)</span><br></pre></td></tr></table></figure>
<p>结果如下：<br><code>&lt;p&gt;Walter White aka Heisenberg&lt;/p&gt;</code></p>
<h2 id="Vue-use"><a href="#Vue-use" class="headerlink" title="Vue.use()"></a>Vue.use()</h2><p>用 Vue.use() 定义全局组件<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">定义一个 button 组件</span><br><span class="line">// button.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span></span><br><span class="line">        按钮    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>button.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ButtonComponent <span class="keyword">from</span> <span class="string">'./button.vue'</span>;</span><br><span class="line"><span class="keyword">const</span> Button=&#123;</span><br><span class="line">  install:<span class="function"><span class="keyword">function</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">    Vue.component(<span class="string">'Button'</span>,ButtonComponent)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Button;</span><br></pre></td></tr></table></figure></p>
<p>main.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Button <span class="keyword">from</span> <span class="string">'./component/button.js'</span>;</span><br><span class="line">Vue.use(Button);</span><br></pre></td></tr></table></figure></p>
<p>完成上面的步骤就可以在全局使用button组件了，其实最重要的Vue.component(‘Button’,ButtonComponent), Vue.use(Button)会执行install方法，也可以直接在main.js使用Vue.component()注册全局组件。</p>
<h2 id="provide-inject-跨级组件交互"><a href="#provide-inject-跨级组件交互" class="headerlink" title="provide/inject 跨级组件交互"></a>provide/inject 跨级组件交互</h2><blockquote>
<p>2.2.0 新增<br>这对选项需要一起使用，以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父级组件提供 'foo'</span></span><br><span class="line"><span class="keyword">var</span> Provider = &#123;</span><br><span class="line">  provide: &#123;</span><br><span class="line">    foo: <span class="string">'bar'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子组件注入 'foo'</span></span><br><span class="line"><span class="keyword">var</span> Child = &#123;</span><br><span class="line">  inject: [<span class="string">'foo'</span>],</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo) <span class="comment">// =&gt; "bar"</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果是注入一个父级组件内部的值，provide需要作为一个函数，类似于data<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  name: <span class="string">'comp'</span>,</span><br><span class="line">  inject: [<span class="string">"value"</span>]</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;子组件 &#123;&#123;value&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> CompVue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value: <span class="string">'123'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  components:&#123;</span><br><span class="line">    Comp</span><br><span class="line">  &#125;,</span><br><span class="line">  provide() &#123; <span class="comment">// 这里如果只是一个对象的话是无法拿到this.value的</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value: <span class="keyword">this</span>.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;comp&gt;&lt;/comp&gt;</span></span><br><span class="line"><span class="string">      &lt;input type="text" v-model="value"&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果要监听父级组件的属性值的变化，从而自动更新子组件的值，需要手动实现监听<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  name: <span class="string">'comp'</span>,</span><br><span class="line">  inject: [<span class="string">"data"</span>]</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;子组件 &#123;&#123;data.value&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">provide() &#123; </span><br><span class="line">  <span class="keyword">const</span> data = &#123;&#125;</span><br><span class="line">  <span class="comment">// 这是vue双向绑定的基础</span></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(data,<span class="string">"value"</span>,&#123;</span><br><span class="line">    get: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.value,</span><br><span class="line">    enumerable: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    data</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h2 id="组件Component"><a href="#组件Component" class="headerlink" title="组件Component"></a>组件Component</h2><p><strong>使用方法</strong><br><img src="/2018/06/21/vue/component.jpg" alt="component"></p>
<p><strong>加data</strong><br><img src="/2018/06/21/vue/cData.jpg" alt="cData"></p>
<p><strong>常规的方法</strong><br><img src="/2018/06/21/vue/sComponent.jpg" alt="sComponent.jpg"></p>
<p><strong>组件的三层嵌套</strong><br><img src="/2018/06/21/vue/cC.jpg" alt="cC.jpg"></p>
<p>例子:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'my-aaa'</span>,&#123;</span><br><span class="line">            template:<span class="string">'&lt;h3&gt;我是组件&lt;/h3&gt;&lt;strong&gt;我是加粗标签&lt;/strong&gt;'</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">                el:<span class="string">'#box'</span>,</span><br><span class="line">                data:&#123;</span><br><span class="line">                    msg:<span class="string">'welcome vue2.0'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">my-aaa</span>&gt;</span></span><br><span class="line">    &#123;&#123;msg&#125;&#125; </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p><a href="https://cn.vuejs.org/v2/guide/instance.html#生命周期图示" target="_blank" rel="noopener">生命周期图示</a></p>
<p>  之前:<br>    <code>init</code><br>    <code>created</code><br>    <code>beforeCompile</code><br>    <code>compiled</code><br>    <code>ready</code>   √ -&gt;     <code>mounted</code><br>    <code>beforeDestroy</code><br>    <code>destroyed</code><br>  现在:<br>    <code>beforeCreate</code>  组件实例刚刚被创建,属性都没有<br>    <code>created</code> 实例已经创建完成，属性已经绑定<br>    <code>beforeMount</code> 模板编译之前<br>    <code>mounted</code> 模板编译之后，代替之前ready  ※<br>    <code>beforeUpdate</code>  组件更新之前<br>    <code>updated</code> 组件更新完毕  ※<br>    <code>beforeDestroy</code> 组件销毁前<br>    <code>destroyed</code> 组件销毁后<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate()&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'组件实例刚刚被创建'</span>);</span><br><span class="line">&#125;</span><br><span class="line">methods:&#123;</span><br><span class="line">  update()&#123;</span><br><span class="line">    <span class="keyword">this</span>.msg=<span class="string">'大家好'</span>;</span><br><span class="line">&#125;,</span><br><span class="line">  destroy()&#123;</span><br><span class="line">      <span class="keyword">this</span>.$destroy();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p>例子:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        &#123;&#123;msg | my&#125;&#125;</span><br><span class="line">        <span class="comment">&lt;!-- 装饰过滤器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span> &#123;&#123;'111' | test('参数')&#125;&#125;</span><br><span class="line">        <span class="comment">&lt;!--内置111参数--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span> &#123;&#123;time | date&#125;&#125;</span><br><span class="line">        <span class="comment">&lt;!-- 2018-6-24 16:55:50 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span> &#123;&#123;number | toFixed(2)&#125;&#125;</span><br><span class="line">        <span class="comment">&lt;!--¥1.23--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span> &#123;&#123;html | filterHTML&#125;&#125; <span class="comment">&lt;!-- p内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    Vue.filter(<span class="string">'my'</span>, (data) =&gt; &#123; <span class="comment">//要放在vue挂载对象前 ,注册过滤器</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="string">'装饰'</span> + data</span></span><br><span class="line"><span class="undefined">    &#125;)   </span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    Vue.filter(<span class="string">'date'</span>, (input) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>(input);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> oDate.getFullYear() + <span class="string">'-'</span> + (oDate.getMonth() + <span class="number">1</span>) + <span class="string">'-'</span> + oDate.getDate() + <span class="string">' '</span> + oDate.getHours() + <span class="string">':'</span> + oDate.getMinutes() + <span class="string">':'</span> + oDate.getSeconds();</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// Vue.filter('filterHtml', &#123; //// 过滤html标签  错误</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//     read: function(input) &#123; //model-view</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//         return (input.replace(/&lt;[^&lt;]+&gt;/g, ''));</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//     &#125;,</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//     write: function(val) &#123; //view -&gt; model</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//         return val;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="undefined">        data: &#123;</span></span><br><span class="line"><span class="javascript">            msg: <span class="string">'过滤器'</span>,</span></span><br><span class="line"><span class="javascript">            time: <span class="keyword">new</span> <span class="built_in">Date</span>(),</span></span><br><span class="line"><span class="undefined">            number: 1.226565,</span></span><br><span class="line"><span class="xml">            html: '<span class="tag">&lt;<span class="name">p</span>&gt;</span>p内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        filters: &#123; <span class="comment">//内置过滤器</span></span></span><br><span class="line"><span class="undefined">            test(data, param) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="string">'内置'</span> + data + param</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="javascript">            toFixed(input, param) &#123; <span class="comment">//货币 小数点两位</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="string">'¥'</span> + input.toFixed(param)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="javascript">            filterHTML(input) &#123; <span class="comment">// 过滤html标签</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(input)</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> (input.replace(<span class="regexp">/&lt;[^&lt;]+&gt;/g</span>, <span class="string">''</span>))</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;).$mount(<span class="string">'#app'</span>)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>vue写法<br> 之前: <code>{</code>{msg | toDou ‘12’ ‘5’<code>}}</code><br>   vue2.0 现在:     <code>{</code>{msg | toDou(‘12’,’5’)<code>}}</code><br>   到了2.0， 内置过滤器，全部删除了</p>
<p><strong>自制时间过滤器</strong></p>
<p><code>{</code>{time | date}<code>}</code> 2018-6-24 16:55:50 </p>
<p>data里:<code>time:new Date()</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  Vue.filter(<span class="string">'date'</span>,(input)=&gt;&#123;   </span><br><span class="line">    <span class="keyword">var</span> oDate=<span class="keyword">new</span> <span class="built_in">Date</span>(input);</span><br><span class="line">      <span class="keyword">return</span> oDate.getFullYear()+<span class="string">'-'</span>+(oDate.getMonth()+<span class="number">1</span>)+<span class="string">'-'</span>+oDate.getDate()+<span class="string">' '</span>+oDate.getHours()+<span class="string">':'</span>+oDate.getMinutes()+<span class="string">':'</span>+oDate.getSeconds();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>moment.js过滤器</strong><br><img src="/2018/06/21/vue/moment.jpg" alt="moment"><br><img src="/2018/06/21/vue/momentP.jpg" alt="momentP.jpg"></p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p><img src="/2018/06/21/vue/plugin2.jpg" alt="plugin2.jpg"><br><img src="/2018/06/21/vue/plugin.jpg" alt="plugin.jpg"></p>
<p><strong>使用插件</strong><br><img src="/2018/06/21/vue/plugin3.jpg" alt="plugin3.jpg"></p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p><img src="/2018/06/21/vue/directive.jpg" alt="directive"><br>1.0<br>自定义指令:<br>  属性:<br>  Vue.directive(指令名称,function(参数){<br>    this.el -&gt; 原生DOM元素<br>  });</p>
<p>2.0<br>  <code>&lt;div v-color=&quot;参数&quot;&gt;&lt;/div&gt;</code></p>
<p>  指令名称:   v-color  -&gt;  red</p>
<ul>
<li><p>注意: 必须以 v-开头</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-color</span>=<span class="string">'flag'</span>&gt;</span>变色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    directives:&#123; <span class="comment">//自定color指令方法</span></span></span><br><span class="line"><span class="undefined">      color(el,bindings)&#123; </span></span><br><span class="line"><span class="undefined">        el.style.background=bindings.value</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">    data:&#123;</span></span><br><span class="line"><span class="javascript">      flag:<span class="string">'red'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>自定拖拽指令</strong></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-drag</span> <span class="attr">:style</span>=<span class="string">"&#123;width:'100px', height:'100px', background:'blue', position:'absolute', right:0, top:0&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-drag</span> <span class="attr">:style</span>=<span class="string">"&#123;width:'100px', height:'100px', background:'red', position:'absolute', left:0, top:0&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//好处 可以使用多个指令控制多个div</span></span><br><span class="line">Vue.directive(<span class="string">'drag'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">el</span>)</span>&#123; <span class="comment">//自定全局拖拽指令</span></span><br><span class="line">          el.onmousedown=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123; <span class="comment">//按下</span></span><br><span class="line">              <span class="keyword">var</span> disX=ev.clientX-el.offsetLeft; <span class="comment">//鼠标到div边框的距离</span></span><br><span class="line">              <span class="keyword">var</span> disY=ev.clientY-el.offsetTop;</span><br><span class="line"></span><br><span class="line">              <span class="built_in">document</span>.onmousemove=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123; <span class="comment">//移动</span></span><br><span class="line">                  <span class="keyword">var</span> l=ev.clientX-disX; <span class="comment">//div随移动鼠标偏移</span></span><br><span class="line">                  <span class="keyword">var</span> t=ev.clientY-disY;</span><br><span class="line">                  el.style.left=l+<span class="string">'px'</span>;</span><br><span class="line">                  el.style.top=t+<span class="string">'px'</span>;</span><br><span class="line">              &#125;;</span><br><span class="line"></span><br><span class="line">               <span class="built_in">document</span>.onmouseup=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//松起</span></span><br><span class="line">                  <span class="built_in">document</span>.onmousemove=<span class="literal">null</span>;</span><br><span class="line">                  <span class="built_in">document</span>.onmouseup=<span class="literal">null</span>;</span><br><span class="line">              &#125;;</span><br><span class="line">          &#125;;</span><br><span class="line">           </span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="插槽Slot"><a href="#插槽Slot" class="headerlink" title="插槽Slot"></a>插槽Slot</h2><p><a href="https://cn.vuejs.org/v2/guide/components-slots.html" target="_blank" rel="noopener">文档</a><br>slot:<br>  位置、槽口<br>  作用: 占个位置 可以代替移动标签位置<br>默认的标签会放在default中 name=’default’<br>这里存放的内容都是属于父级的<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">aaa</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"aaa"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>这是默认<span class="tag">&lt;/<span class="name">slot</span>&gt;</span> <span class="comment">&lt;!--name='default'--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vm=<span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el:<span class="string">'#box'</span>,</span></span><br><span class="line"><span class="undefined">    components:&#123;</span></span><br><span class="line"><span class="javascript">      aaa:&#123;    <span class="comment">//注册组件</span></span></span><br><span class="line"><span class="javascript">          template:<span class="string">"#aaa"</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="/2018/06/21/vue/slot.jpg" alt="slot"></p>
<h3 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h3><p><img src="/2018/06/21/vue/插槽.jpg" alt="插槽.jpg"></p>
<h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p><img src="/2018/06/21/vue/作用域插槽.jpg" alt="作用域插槽"></p>
<h2 id="动画-过渡"><a href="#动画-过渡" class="headerlink" title="动画 过渡"></a>动画 过渡</h2><p>过渡动画的类的增加和删除<br>进入显示的动画<br><img src="/2018/06/21/vue/transition2.jpg" alt="动画"><br>离开隐藏的动画<br><img src="/2018/06/21/vue/transitions.jpg" alt="transitions.jpg"><br>到2.0以后 transition 组件<br><img src="/2018/06/21/vue/transition.jpg" alt="transition"></p>
<h3 id="过渡"><a href="#过渡" class="headerlink" title="过渡"></a>过渡</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'showHidden'</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">'background:red;color:white'</span> <span class="attr">v-show</span>=<span class="string">'show'</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"stylus"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.v-enter</span> </span></span><br><span class="line"><span class="css">    <span class="selector-class">.v-leave-to</span></span></span><br><span class="line"><span class="undefined">      opacity 0</span></span><br><span class="line"><span class="css">    <span class="selector-class">.v-enter-active</span>  </span></span><br><span class="line"><span class="css">    <span class="selector-class">.v-leave-active</span></span></span><br><span class="line"><span class="undefined">      transition opacity 3s</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>例子<br><img src="/2018/06/21/vue/transitions-demo.jpg" alt="transitions-demo.jpg"><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"fade"</span>&gt;</span></span><br><span class="line">  运动东西(元素，属性、路由....)</span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>class定义</strong><br><code>.fade-enter{}</code>//初始状态 (开始变化)<br><code>.fade-enter-active{}</code>  //变化成什么样  -&gt;  当元素出来(显示) (没定义leave)会回到最初的属性<br><code>.fade-leave{}</code> 末状态<br><code>.fade-leave-active{}</code> //变成成什么样   -&gt; 当元素离开(消失)</p>
<blockquote>
<p>transition<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    p&#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">width</span><span class="selector-pseudo">:300px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">height</span><span class="selector-pseudo">:300px</span>;</span></span><br><span class="line"><span class="undefined">      background: red;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.fade-enter-active</span>, <span class="selector-class">.fade-leave-active</span>&#123;</span></span><br><span class="line"><span class="undefined">      transition: 1s all ease;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    .fade-enter-active&#123;    //第一次点击显示宽高300</span></span><br><span class="line"><span class="css">    <span class="selector-tag">opacity</span><span class="selector-pseudo">:1</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">width</span><span class="selector-pseudo">:300px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">height</span><span class="selector-pseudo">:300px</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    .fade-leave-active&#123;  //第二点击消失到宽高100</span></span><br><span class="line"><span class="css">    <span class="selector-tag">opacity</span><span class="selector-pseudo">:0</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">width</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">height</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    .fade-enter,.fade-leave&#123;  //开始/离开显示</span></span><br><span class="line"><span class="css">      <span class="selector-tag">opacity</span><span class="selector-pseudo">:1</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">width</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">height</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">      el:<span class="string">'#box'</span>,</span></span><br><span class="line"><span class="undefined">      data:&#123;</span></span><br><span class="line"><span class="javascript">        show:<span class="literal">false</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点击显示隐藏"</span> @<span class="attr">click</span>=<span class="string">"show=!show"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"fade"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"show"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><strong>不用加name属性</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type="text/css"&gt;</span><br><span class="line">  <span class="comment">/*开始显示*/</span></span><br><span class="line">  <span class="selector-class">.v-enter</span>&#123; <span class="attribute">opacity</span>: <span class="number">0</span>; &#125;</span><br><span class="line">  <span class="comment">/*显示过程*/</span></span><br><span class="line">  <span class="selector-class">.v-enter-active</span>&#123; <span class="attribute">transition</span>: opacity <span class="number">1.5s</span>;<span class="comment">/*给transition加过渡特效(属性),持续时间为1.5秒*/</span> &#125;</span><br><span class="line">  <span class="comment">/*显示完毕*/</span></span><br><span class="line">  <span class="selector-class">.v-enter-to</span>&#123; <span class="attribute">opacity</span>: <span class="number">1</span>; &#125;</span><br><span class="line">  <span class="comment">/*开始隐藏*/</span></span><br><span class="line">  <span class="selector-class">.v-leave</span>&#123; <span class="attribute">opacity</span>: <span class="number">1</span>; &#125;</span><br><span class="line">  <span class="comment">/*隐藏过程*/</span></span><br><span class="line">  <span class="selector-class">.v-leave-active</span>&#123; <span class="attribute">transition</span>: opacity <span class="number">1.5s</span>; &#125;</span><br><span class="line">  <span class="comment">/*隐藏完毕*/</span></span><br><span class="line">  <span class="selector-class">.v-leave-to</span>&#123; <span class="attribute">opacity</span>: <span class="number">0</span>; &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>相关函数</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"fade"</span></span></span><br><span class="line"><span class="tag">           @<span class="attr">before-enter</span>=<span class="string">"beforeEnter"</span></span></span><br><span class="line"><span class="tag">           @<span class="attr">enter</span>=<span class="string">"enter"</span></span></span><br><span class="line"><span class="tag">           @<span class="attr">after-enter</span>=<span class="string">"afterEnter"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">           @<span class="attr">before-leave</span>=<span class="string">"beforeLeave"</span></span></span><br><span class="line"><span class="tag">           @<span class="attr">leave</span>=<span class="string">"leave"</span></span></span><br><span class="line"><span class="tag">           @<span class="attr">after-leave</span>=<span class="string">"afterLeave"</span></span></span><br><span class="line"><span class="tag">       &gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"show"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">methods:&#123;</span><br><span class="line">      beforeEnter(el)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'动画enter之前'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      enter(el)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'动画enter进入'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      afterEnter(el)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'动画进入之后'</span>);</span><br><span class="line">          el.style.background=<span class="string">'blue'</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      beforeLeave()&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'动画leave之前'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      leave()&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'动画leave'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      afterLeave()&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'动画leave之后'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>使用注意要有done()</p>
<p> <img src="/2018/06/21/vue/动画函数.jpg" alt="动画函数"> </p>
<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><p>放大的动画效果</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'showHidden'</span>&gt;</span>显示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">'background:red;color:white'</span> <span class="attr">v-show</span>=<span class="string">'show'</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-id">#other</span> &#123;</span></span><br><span class="line"><span class="undefined">    font-size: 32px</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  @<span class="keyword">keyframes</span> bounce-in &#123;</span></span><br><span class="line"><span class="undefined">    0% &#123;</span></span><br><span class="line"><span class="undefined">      transform: scale(0)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    50% &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(1<span class="selector-class">.5</span>)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    100% &#123;</span></span><br><span class="line"><span class="undefined">      transform: scale(1)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.v-enter-active</span> &#123;</span></span><br><span class="line"><span class="undefined">    transfrom-origin: left center;</span></span><br><span class="line"><span class="undefined">    animation: bounce-in 1s;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.v-leave-active</span> &#123;</span></span><br><span class="line"><span class="undefined">    transfrom-origin: left center;</span></span><br><span class="line"><span class="undefined">    animation: bounce-in 1s reverse;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>自定义动画class<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">enterActiveClass</span>=<span class="string">"active"</span> <span class="attr">leaveActiveClass</span>=<span class="string">"leave"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">'show'</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="同时使用和设置时长"><a href="#同时使用和设置时长" class="headerlink" title="同时使用和设置时长"></a>同时使用和设置时长</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.fade-enter</span>, <span class="selector-class">.fade-leave-to</span>&#123;</span></span><br><span class="line"><span class="undefined">    opacity: 0;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.fade-enter-active</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-class">.fade-leave-active</span>&#123;</span></span><br><span class="line"><span class="undefined">    transition: opacity 3s;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1.以过渡为时间--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.:duration='&#123;enter:5000,leave:10000&#125;' 自定义动画的时长10s--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span> <span class="attr">type</span>=<span class="string">"transition"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:duration</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">enterActiveClass</span>=<span class="string">"animated swing fade-enter-active"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">leaveActiveClass</span>=<span class="string">"animated shake fade-leave-active"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">appear</span></span></span><br><span class="line"><span class="tag">                <span class="attr">appearActiveClass</span>=<span class="string">"animated swing"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">'show'</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>动画组件切换<br><img src="/2018/06/21/vue/多个动画.jpg" alt="多个动画"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition mode=&quot;out-in&quot;&gt;</span><br><span class="line">     &lt;!--1.实现多个动画 加key--&gt;</span><br><span class="line">     &lt;!--2.mode=&apos;out-in&apos;--先隐藏在进入--&gt;</span><br><span class="line">     &lt;div v-if=&apos;show&apos; key=&quot;hello&quot;&gt;hello&lt;/div&gt;</span><br><span class="line">     &lt;div v-else key=&quot;bye&quot;&gt;bye&lt;/div&gt;</span><br><span class="line">   &lt;/transition&gt;</span><br></pre></td></tr></table></figure>
<p>多个组件的过渡<br><code>&lt;transition-group&gt;&lt;/transition-group&gt;</code></p>
<h3 id="引入动画插件"><a href="#引入动画插件" class="headerlink" title="引入动画插件"></a>引入动画插件</h3><p><img src="/2018/06/21/vue/animate.jpg" alt="animate"></p>
<p><a href="https://daneden.github.io/animate.css/" target="_blank" rel="noopener">官网</a></p>
<p>cnd</p>
<p><code>&lt;link href=&quot;https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css&quot; rel=&quot;stylesheet&quot;&gt;</code></p>
<p>例子:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"show"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">enter-active-class</span>=<span class="string">"zoomInLeft"</span> <span class="attr">leave-active-class</span>=<span class="string">"zoomOutRight"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"show"</span> <span class="attr">class</span>=<span class="string">"animated"</span> <span class="attr">v-for</span>=<span class="string">"(val,index) in lists"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      &#123;&#123;val&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> vm=<span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">      el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">      data:&#123;</span></span><br><span class="line"><span class="javascript">          show:<span class="string">''</span>,</span></span><br><span class="line"><span class="javascript">          list:[<span class="string">'apple'</span>,<span class="string">'banana'</span>,<span class="string">'orange'</span>,<span class="string">'pear'</span>]</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      computed:&#123;</span></span><br><span class="line"><span class="javascript">          lists:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> arr=[];</span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">val</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">if</span>(val.indexOf(<span class="keyword">this</span>.show)!==<span class="number">-1</span>)&#123;  <span class="comment">//按输入的内容渲染li的个数</span></span></span><br><span class="line"><span class="undefined">                      arr.push(val);</span></span><br><span class="line"><span class="undefined">                  &#125;</span></span><br><span class="line"><span class="javascript">              &#125;.bind(<span class="keyword">this</span>));</span></span><br><span class="line"><span class="javascript">              <span class="keyword">return</span> arr;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在项目中使用</p>
<blockquote>
<p>npm install animate.css –save</p>
</blockquote>
<p>main.js中：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> animated <span class="keyword">from</span> <span class="string">'animate.css'</span> <span class="comment">// npm install animate.css --save安装，在引入</span></span><br><span class="line">Vue.use(animated)</span><br></pre></td></tr></table></figure></p>
<p>在组件中使用<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span></span></span><br><span class="line"><span class="tag">  <span class="attr">enterActiveClass</span>=<span class="string">"animated swing"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">leaveActiveClass</span>=<span class="string">"animated shake"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>一开始就有动画效果<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">enterActiveClass</span>=<span class="string">"animated swing"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">leaveActiveClass</span>=<span class="string">"animated shake"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">appear</span></span></span><br><span class="line"><span class="tag">               <span class="attr">appearActiveClass</span>=<span class="string">"animated swing"</span></span></span><br><span class="line"><span class="tag">   &gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">'show'</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Velocity-js"><a href="#Velocity-js" class="headerlink" title="Velocity.js"></a>Velocity.js</h3><p><a href="http://www.mrfront.com/docs/velocity.js/index.html" target="_blank" rel="noopener">http://www.mrfront.com/docs/velocity.js/index.html</a><br><img src="/2018/06/21/vue/Velocity.jpg" alt="Velocity.jpg"></p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>**实现单页开发的方式</p>
<ul>
<li>通过hash记录跳转路径(可以产生历史管理)</li>
<li>浏览器自带历史管理的方式history(history.pushState())可能会导致404错误</li>
</ul>
<blockquote>
<p>开发时使用hash的方式, 上线的话我们会使用history的方式</p>
</blockquote>
<p><a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener">官网介绍</a></p>
<p>cnd</p>
<p><code>&lt;script src=&quot;https://cdn.bootcss.com/vue-router/3.0.1/vue-router.min.js&quot;&gt;&lt;/script&gt;</code></p>
<p>例子:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--前端后端分离 后端只负责提供接口供前端调用，像跳转都是前端自己处理的</span></span><br><span class="line"><span class="comment">hash模式 # 开发时使用hash 不会导致404 hash方式不支持seo   h5的history.pushState （上线采用h5的跳转）</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--router-view是一个全局组件，可以直接使用--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home"</span> <span class="attr">tag</span>=<span class="string">"button"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/list"</span> <span class="attr">tag</span>=<span class="string">"button"</span>&gt;</span>列表页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> home = &#123;<span class="attr">template</span>:<span class="string">'&lt;div&gt;首页&lt;/div&gt;'</span>&#125;;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> list = &#123;<span class="attr">template</span>:<span class="string">'&lt;div&gt;列表页&lt;/div&gt;'</span>&#125;;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> routes = [ <span class="comment">// 路由的映射表 配置路径和组件的关系</span></span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">path</span>:<span class="string">'/home'</span>,<span class="attr">component</span>:home&#125;, <span class="comment">// 配置的关系就是页面级组件</span></span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">path</span>:<span class="string">'/list'</span>,<span class="attr">component</span>:list&#125; <span class="comment">// 路径必须加/</span></span></span><br><span class="line"><span class="undefined">    ];</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> router = <span class="keyword">new</span> VueRouter(&#123; <span class="comment">// 引入vue-router自带VueRouter类</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// mode:'history', // h5模式</span></span></span><br><span class="line"><span class="undefined">        routes,</span></span><br><span class="line"><span class="javascript">        linkActiveClass:<span class="string">'active'</span> <span class="comment">// 更改默认样式的类名 默认叫router-link-active</span></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        router</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="路由嵌套"><a href="#路由嵌套" class="headerlink" title="路由嵌套"></a>路由嵌套</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/detail"</span>&gt;</span>详情页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"detail"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/detail/profile"</span>&gt;</span>个人中心<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/detail/about"</span>&gt;</span>关于我<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        path:<span class="string">'/home'</span>,</span><br><span class="line">        component:home&#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path:<span class="string">'/detail'</span>,</span><br><span class="line">        component:detail,</span><br><span class="line">        children:[ <span class="comment">// children中的路径永远不带，如果带/表示是1级路由</span></span><br><span class="line">            &#123;<span class="attr">path</span>:<span class="string">'profile'</span>,<span class="attr">component</span>:profile&#125;,</span><br><span class="line">            &#123;<span class="attr">path</span>:<span class="string">'about'</span>,<span class="attr">component</span>:about&#125;,</span><br><span class="line">            &#123;<span class="attr">path</span>:<span class="string">'*'</span>, <span class="attr">redirect</span>:<span class="string">'/home'</span>&#125;  <span class="comment">//404</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<h3 id="params参数"><a href="#params参数" class="headerlink" title="params参数"></a>params参数</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--如果用对象作为to的属性，并且使用了参数 必须给路由起个名字，通过名字跳转--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123;name:'pro',params:&#123;c:1,a:2&#125;&#125;"</span>&gt;</span>商品1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/article/2/b"</span>&gt;</span>商品2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/article/3/c"</span>&gt;</span>商品3<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #/article/2</span></span><br><span class="line"><span class="keyword">let</span> article = &#123;<span class="attr">template</span>:<span class="string">'&lt;div&gt;第 &#123;&#123;$route.params.c&#125;&#125; 篇文章&lt;/div&gt;'</span>,</span><br><span class="line"><span class="comment">// /article/2/d  匹配出一个对象</span></span><br><span class="line"><span class="comment">// /article/:c/:a =&gt; &#123;c:2,a:'d'&#125; = this.$route.params</span></span><br><span class="line"><span class="comment">// 详情页</span></span><br><span class="line"></span><br><span class="line">created()&#123; <span class="comment">// 默认调用一次created</span></span><br><span class="line">    alert(<span class="string">'来个ajax'</span>);</span><br><span class="line">&#125;,</span><br><span class="line">watch:&#123; <span class="comment">// 路径参数发生变化 监控参数的变化来发送ajax</span></span><br><span class="line">    $route()&#123;</span><br><span class="line">        alert(<span class="string">'来个ajax'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> routes = [ <span class="comment">// 路径参数 表示值必须要有但是值是随机的</span></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">'/article/:c/:a'</span>,<span class="attr">component</span>:article&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//&#123;path:'/article/:c/:a',component:article,name:'pro'&#125;</span></span><br><span class="line"></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>路由实例方法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  router.push(&#123;<span class="attr">path</span>:<span class="string">'home'</span>&#125;);  <span class="comment">//直接添加一个路由,表现切换路由，本质往历史记录里面添加一个</span></span><br><span class="line">  router.replace(&#123;<span class="attr">path</span>:<span class="string">'news'</span>&#125;) <span class="comment">//替换路由，不会往历史记录里面添加</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    router,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        push()&#123;</span><br><span class="line">            router.push(&#123;<span class="attr">path</span>:<span class="string">'home'</span>&#125;); <span class="comment">//相当于点击home</span></span><br><span class="line">        &#125;,</span><br><span class="line">        replace()&#123;</span><br><span class="line">            router.replace(&#123;<span class="attr">path</span>:<span class="string">'user'</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).$mount(<span class="string">'#box'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router=<span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>, <span class="comment">//切换路径模式，变成history模式</span></span><br><span class="line">  scrollBehavior: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">y</span>: <span class="number">0</span> &#125;), <span class="comment">// 滚动条滚动的行为，不加这个默认就会记忆原来滚动条的位置</span></span><br><span class="line">  routes</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="动画缓存"><a href="#动画缓存" class="headerlink" title="动画缓存"></a>动画缓存</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/list"</span>&gt;</span>列表页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mode="out-in"动画的模式--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition</span> <span class="attr">enter-active-class</span>=<span class="string">"animated fadeIn"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">leave-active-class</span>=<span class="string">"animated fadeOut"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="comment">&lt;!--要缓存谁 就把谁包起来即可--&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--一般用作缓存：为的是后面的路由做准备，如果缓存了就不会再走created mounted钩子函数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">style</span>=<span class="string">"position: absolute;top:50px ;left: 0;width: 100%"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    let home = &#123;template:'<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background: red"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">div</span>&gt;</span>'&#125;;</span></span><br><span class="line"><span class="xml">    let list = &#123;template:'<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background: green"</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span>'&#125;;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> routes = [</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">path</span>:<span class="string">'/home'</span>,<span class="attr">component</span>:home&#125;,</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">path</span>:<span class="string">'/list'</span>,<span class="attr">component</span>:list&#125;,</span></span><br><span class="line"><span class="undefined">    ];</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> router = <span class="keyword">new</span> VueRouter(&#123;</span></span><br><span class="line"><span class="undefined">        routes</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        router</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="发布-订阅"><a href="#发布-订阅" class="headerlink" title="发布 订阅"></a>发布 订阅</h2><h3 id="emit"><a href="#emit" class="headerlink" title="emit"></a>emit</h3><p>例子:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  父亲：&#123;&#123;money&#125;&#125;</span><br><span class="line">  <span class="comment">&lt;!--child.$on('child-msg',things)--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child</span> <span class="attr">:m</span>=<span class="string">"money"</span> @<span class="attr">child-msg</span>=<span class="string">"things"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--父亲绑定一些事件，儿子触发这个事件 将参数传递过去 单向数据流，父亲数据刷新 儿子就刷新--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data:&#123;money:400&#125;,</span></span><br><span class="line"><span class="javascript">        methods:&#123;things(val)&#123;<span class="keyword">this</span>.money = val;&#125;&#125;,</span></span><br><span class="line"><span class="undefined">        components:&#123;</span></span><br><span class="line"><span class="undefined">            child:&#123;</span></span><br><span class="line"><span class="javascript">                props:[<span class="string">'m'</span>],</span></span><br><span class="line"><span class="xml">                template:'<span class="tag">&lt;<span class="name">div</span>&gt;</span>儿子:&#123;&#123;m&#125;&#125; <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"getMoney()"</span>&gt;</span>多要钱<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>',</span></span><br><span class="line"><span class="undefined">                methods:&#123;</span></span><br><span class="line"><span class="undefined">                    getMoney()&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">this</span>.$emit(<span class="string">'child-msg'</span>,<span class="number">800</span>);<span class="comment">// 触发自己的自定义事件，让父亲的方法执行</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>props属性 详细介绍</p>
<p><img src="/2018/06/21/vue/props.jpg" alt="props"></p>
<h3 id="EventBus"><a href="#EventBus" class="headerlink" title="EventBus"></a>EventBus</h3><p>例子:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">brother1</span>&gt;</span><span class="tag">&lt;/<span class="name">brother1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">brother2</span>&gt;</span><span class="tag">&lt;/<span class="name">brother2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> EventBus = <span class="keyword">new</span> Vue;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(EventBus)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> brother1 = &#123;</span></span><br><span class="line"><span class="xml">        template:'<span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;color&#125;&#125; <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"change"</span>&gt;</span>变绿<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>',</span></span><br><span class="line"><span class="undefined">        data()&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;<span class="attr">color</span>:<span class="string">'绿色'</span>,<span class="attr">old</span>:<span class="string">'绿色'</span>&#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">        methods:&#123;</span></span><br><span class="line"><span class="undefined">        change()&#123;</span></span><br><span class="line"><span class="javascript">        EventBus.$emit(<span class="string">'changeGreen'</span>,<span class="keyword">this</span>.old); <span class="comment">//告诉兄弟2 要改颜绿色</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">        created()&#123;</span></span><br><span class="line"><span class="javascript">        EventBus.$on(<span class="string">'changeRed'</span>,(val)=&gt;&#123; <span class="comment">// 页面一加载兄弟1长个耳朵听</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.color = val;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> brother2 = &#123;</span></span><br><span class="line"><span class="xml">        template:'<span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;color&#125;&#125; <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"change"</span>&gt;</span>变红<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>',</span></span><br><span class="line"><span class="undefined">        created()&#123;</span></span><br><span class="line"><span class="javascript">        EventBus.$on(<span class="string">'changeGreen'</span>,(val)=&gt;&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.color = val;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">        methods:&#123;</span></span><br><span class="line"><span class="undefined">        change()&#123;</span></span><br><span class="line"><span class="javascript">        EventBus.$emit(<span class="string">'changeRed'</span>,<span class="keyword">this</span>.old)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">        data()&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;<span class="attr">color</span>:<span class="string">'红色'</span>,<span class="attr">old</span>:<span class="string">'红色'</span>&#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        components:&#123;</span></span><br><span class="line"><span class="undefined">        brother1,brother2</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="如何实现"><a href="#如何实现" class="headerlink" title="如何实现"></a>如何实现</h3><p>vue中是如何实现的?<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发布 emit 订阅 on &#123;&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Girl</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._events = &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">Girl.prototype.on = <span class="function"><span class="keyword">function</span> (<span class="params">eventName,callback</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>._events[eventName])&#123; <span class="comment">// 不是第一次</span></span><br><span class="line">        <span class="keyword">this</span>._events[eventName].push(callback); <span class="comment">// &#123;失恋:[cry,eat,shopping]&#125;</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._events[eventName] = [callback] <span class="comment">//&#123;失恋:[cry]&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Girl.prototype.emit = <span class="function"><span class="keyword">function</span> (<span class="params">eventName,...args</span>) </span>&#123; <span class="comment">//[我，你，他]</span></span><br><span class="line">    <span class="comment">// [].slice.call(arguments,1); 把类数组变成数组后去掉第一个</span></span><br><span class="line">    <span class="comment">// Array.from(arguments).slice(1);</span></span><br><span class="line">    <span class="comment">//arguments=&#123; '0': '失恋', '1': '我' &#125;</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>._events[eventName])&#123;</span><br><span class="line">        <span class="keyword">this</span>._events[eventName].forEach(<span class="function"><span class="params">cb</span>=&gt;</span>cb(...args));<span class="comment">//cb.apply(this,args)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> girl = <span class="keyword">new</span> Girl();</span><br><span class="line"><span class="keyword">let</span> girl1 = <span class="keyword">new</span> Girl();</span><br><span class="line"><span class="keyword">let</span> cry = <span class="function">(<span class="params">who</span>) =&gt;</span>&#123;<span class="built_in">console</span>.log(who+<span class="string">'哭'</span>);&#125;;</span><br><span class="line"><span class="keyword">let</span> shopping = <span class="function">(<span class="params">who</span>) =&gt;</span>&#123;<span class="built_in">console</span>.log(who+<span class="string">'购物'</span>);&#125;;</span><br><span class="line"><span class="keyword">let</span> eat = <span class="function">(<span class="params">who</span>) =&gt;</span>&#123;<span class="built_in">console</span>.log(who+<span class="string">'吃'</span>);&#125;;</span><br><span class="line">girl.on(<span class="string">'失恋'</span>,cry); <span class="comment">// &#123;失恋:[cry]&#125;</span></span><br><span class="line">girl.on(<span class="string">'失恋'</span>,eat); <span class="comment">// &#123;失恋:[cry,eat]&#125;</span></span><br><span class="line">girl.on(<span class="string">'失恋'</span>,shopping); <span class="comment">// &#123;失恋:[cry,eat,shopping]&#125;</span></span><br><span class="line">girl.emit(<span class="string">'失恋'</span>,<span class="string">"我"</span>,<span class="string">'你'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果</span></span><br><span class="line"><span class="comment">//我哭</span></span><br><span class="line"><span class="comment">//我吃</span></span><br><span class="line"><span class="comment">//我购物</span></span><br></pre></td></tr></table></figure></p>
<h1 id="demo例子"><a href="#demo例子" class="headerlink" title="demo例子"></a>demo例子</h1><blockquote>
<p><a href="https://wecy-chen.github.io/vue-demo/" target="_blank" rel="noopener">demo</a><br><br><br><a href="https://github.com/wecy-chen/vue-demo" target="_blank" rel="noopener">源码</a></p>
</blockquote>
<h1 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h1><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 全局安装 vue-cli</span><br><span class="line">$ npm install --global vue-cli</span><br><span class="line"># 创建一个基于 webpack 模板的新项目</span><br><span class="line">$ vue init webpack my-project</span><br><span class="line"># 安装依赖，走你</span><br><span class="line">$ cd my-project</span><br><span class="line">$ npm install</span><br><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure>
<p>创建项目: vue init webpack-simple my-project(结构简单)</p>
<p>创建vue1.0: vue init webpack-simple#1.0 my-project</p>
<p>vue init webpack my-project(结构复杂)</p>
<p>简单的目录结构:<br>  |-index.html<br>  |-main.js 入口文件<br>  |-App.vue vue文件，官方推荐命名法<br>  |-package.json  工程文件(项目依赖、名称、配置)<br>    npm init –yes 生成<br>  |-webpack.config.js webpack配置文件</p>
<p>package.json 中 npm run dev 会自动执行 dev<br>“scripts”: {<br>    “dev”: “webpack-dev-server –inline –hot –port 8082”<br>  },</p>
<h2 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h2><p><strong>main.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;<span class="comment">//runtime不支持template 只支持render</span></span><br><span class="line"><span class="comment">// 这样直接引用vue 引用的并不是vue.js 引用的是vue的runtime</span></span><br><span class="line"><span class="comment">// vue = compiler + runtime (compiler可以编译模板)</span></span><br><span class="line"><span class="comment">// compiler有6k</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span>;</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="comment">// render函数的作用是将虚拟dom渲染成真实的dom</span></span><br><span class="line">    <span class="comment">// createElement返回的是虚拟的dom</span></span><br><span class="line">    render:<span class="function"><span class="params">h</span>=&gt;</span>h(App)</span><br><span class="line">    <span class="comment">// ...App</span></span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">render:function (createElement) &#123;</span></span><br><span class="line"><span class="comment">    return createElement('h1',[</span></span><br><span class="line"><span class="comment">        'hello',</span></span><br><span class="line"><span class="comment">        createElement('span', '一则头条')</span></span><br><span class="line"><span class="comment">    ]);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br></pre></td></tr></table></figure></p>
<h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p><strong>dependencies和devDependencies 对象有什么区别呢？</strong></p>
<ul>
<li><code>devDependencies</code>  里面的插件只用于<code>开发环境</code>，不用于生产环境，而 <code>dependencies</code>  是需要发布到<code>生产环境</code>的。</li>
</ul>
<p>1.比如我们写一个项目要依赖于jQuery，没有这个包的依赖运行就会报错，这时候就把这个依赖写入dependencies ；<br>2.而我们使用的一些构建工具比如glup、webpack这些只是在开发中使用的包，上线以<br>后就和他们没关系了，所以将它写入devDependencies。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"dependencies"</span>: &#123;  <span class="comment">//安装&gt;npm i 依赖名 --save</span></span><br><span class="line">   <span class="string">"vue"</span>: <span class="string">"^2.4.1"</span> 版本号跟vue-template-compiler 一样</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="string">"devDependencies"</span>: &#123;  <span class="comment">//&gt; npm i install xxx --save-dev</span></span><br><span class="line">   <span class="string">"vue-template-compiler"</span>: <span class="string">"^2.4.1"</span> <span class="comment">//用来解析vue模板的</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h3><p><strong>eslint忽略</strong><br><img src="/2018/06/21/vue/eslint.jpg" alt="eslint.jpg"></p>
<h3 id="vue自定生成文件内容"><a href="#vue自定生成文件内容" class="headerlink" title="vue自定生成文件内容"></a>vue自定生成文件内容</h3><p>编辑vue templates<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/ecmascript-6'</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">    computed: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">    components: &#123;&#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"stylus"</span> <span class="attr">rel</span>=<span class="string">"stylesheet/stylus"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--scoped样式作用于当前组件的节点  使用stylus样式预编译--&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h3><p><strong>ie 9-11 兼容性</strong><br><code>&gt;npm install --save-dev babel-polyfill</code></p>
<p>打开bulid/webpack.base.conf.js<br>修改<br>module.exports = {<br>entry: {<br>app: [<code>&quot;babel-polyfill&quot;</code>, “./src/main.js”]<br>},</p>
<h3 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h3><p>使用css 预编译<br><code>&gt; npm i stylus stylus-loader --save-dev</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"stylus"</span> <span class="attr">rel</span>=<span class="string">"stylesheet/stylus"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-id">#app</span></span></span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#2c3e50</span>;</span></span><br><span class="line"><span class="undefined">  ....</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>其他 - less less-loader  - sass sass-loader</p>
<h3 id="引入bootstrap"><a href="#引入bootstrap" class="headerlink" title="引入bootstrap"></a>引入bootstrap</h3><p><code>&gt; npm install bootstrap --save-dev</code></p>
<p>指定版本<code>npm install bootstrap@3.3.0 --save-dev</code><br><strong>main.js</strong>中导入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'bootstrap/dist/css/bootstrap.min.css'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'bootstrap/dist/js/bootstrap.min'</span></span><br></pre></td></tr></table></figure></p>
<p>想要使用bootstrap还要<br><code>&gt; npm install --save jquery popper.js</code></p>
<p><strong>使用jquery</strong><br>在build/<strong>webpack-base-conf.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack=<span class="built_in">require</span>(<span class="string">'webpack'</span>); </span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;  </span><br><span class="line">    ....</span><br><span class="line">  <span class="comment">// 增加一个plugins  </span></span><br><span class="line">   plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">      $: <span class="string">"jquery"</span>,</span><br><span class="line">      jQuery: <span class="string">"jquery"</span>,</span><br><span class="line">      <span class="string">"windows.jQuery"</span>: <span class="string">"jquery"</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>main.js</strong> 导入 (可以不用)<br><code>import $ from &#39;jquery&#39;</code></p>
<h2 id="图标"><a href="#图标" class="headerlink" title="图标"></a>图标</h2><p><a href="http://www.iconfont.cn/" target="_blank" rel="noopener">iconfont</a></p>
<h2 id="UI组件"><a href="#UI组件" class="headerlink" title="UI组件"></a>UI组件</h2><h3 id="elementUI"><a href="#elementUI" class="headerlink" title="elementUI"></a>elementUI</h3><p><a href="http://element.eleme.io/" target="_blank" rel="noopener">官网</a></p>
<p>安装<br><code>&gt;npm install element-ui -S</code></p>
<p>  //   i  -&gt;    install<br>  //   D     -&gt;    –save-dev<br>  //   S  -&gt;    –save</p>
<ol start="2">
<li>引入   main.js 入口文件<br>import ElementUI from ‘element-ui’<br>import ‘element-ui/lib/theme-default/index.css’<br>Vue.use(ElementUI);</li>
</ol>
<p>引用英语:<br>import locale from ‘element-ui/lib/locale/lang/en’</p>
<p>Vue.use(ElementUI, { locale })</p>
<h3 id="minti-u"><a href="#minti-u" class="headerlink" title="minti-u"></a>minti-u</h3><p><a href="http://mint-ui.github.io/" target="_blank" rel="noopener">移动端 ui库</a></p>
<ol>
<li><p>下载<br>npm install mint-ui -S</p>
<p>-S<br>–save</p>
</li>
<li><p>引入<br>import Vue from ‘vue’;<br>import Mint from ‘mint-ui’;<br>import ‘mint-ui/lib/style.css’<br>Vue.use(Mint);</p>
<p>按需引入:<br>import { Cell, Checklist } from ‘minu-ui’;<br>Vue.component(Cell.name, Cell);<br>Vue.component(Checklist.name, Checklist);</p>
</li>
</ol>
<p><a href="http://mint-ui.github.io/docs/#!/zh-cn2" target="_blank" rel="noopener">http://mint-ui.github.io/docs/#!/zh-cn2</a></p>
<p>论坛:</p>
<hr>
<p>Mint-ui-demo:  看着手册走了一遍</p>
<p><a href="https://github.com/itstrive/striveCode/tree/js/vue2.0-Mint-ui-demo" target="_blank" rel="noopener">Mint-ui-demo</a></p>
<h2 id="插件-1"><a href="#插件-1" class="headerlink" title="插件"></a>插件</h2><p><strong>提示框</strong></p>
<p>例子:<br>新建src/plugin/<strong>notify.vue</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"notify"</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="string">'我太帅了'</span> &#125; <span class="comment">//默认值</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.notify</span> &#123;</span></span><br><span class="line"><span class="undefined">  width: 100px;</span></span><br><span class="line"><span class="undefined">  height: 40px;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0, <span class="selector-class">.45</span>);</span></span><br><span class="line"><span class="undefined">  border-radius: 15px;</span></span><br><span class="line"><span class="undefined">  line-height: 40px;</span></span><br><span class="line"><span class="undefined">  text-align: center;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>src/plugin/<strong>notify.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> modal <span class="keyword">from</span> <span class="string">'./notify.vue'</span>;</span><br><span class="line"><span class="keyword">let</span> notify = &#123; <span class="comment">// 需要在此对象中拥有一个install方法</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// this.$notify('吃饭了吗？',&#123;delay:1000&#125;)</span></span><br><span class="line">notify.install = <span class="function"><span class="keyword">function</span>(<span class="params">Vue, options = &#123; delay: <span class="number">3000</span> &#125;</span>) </span>&#123;</span><br><span class="line">  Vue.prototype.$notify = <span class="function"><span class="keyword">function</span>(<span class="params">message, opt = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (notify.el) <span class="keyword">return</span>; <span class="comment">//多次触发,DOM还没消失</span></span><br><span class="line">    options = &#123; ...options, ...opt &#125;; <span class="comment">// 用自己调用插件时传递过来的属性 覆盖掉默认设置好的</span></span><br><span class="line">    <span class="keyword">let</span> V = Vue.extend(modal); <span class="comment">// 返回的是一个构造函数的子类，参数是包含组件选项的对象</span></span><br><span class="line">    <span class="keyword">let</span> vm = <span class="keyword">new</span> V;</span><br><span class="line">    <span class="keyword">let</span> oDiv = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>); <span class="comment">//创建一个div将实例挂载到元素上</span></span><br><span class="line">    vm.$mount(oDiv);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(message)&#123;</span><br><span class="line">        vm.value = message; <span class="comment">//提示信息</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(vm.$el); <span class="comment">// 把当前实例这个真实对象扔到页面上</span></span><br><span class="line"></span><br><span class="line">    notify.el = vm.$el;<span class="comment">//先挂载DOM对象</span></span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">// 延迟多少秒 将dom元素移除掉</span></span><br><span class="line">      <span class="built_in">document</span>.body.removeChild(vm.$el); <span class="comment">// 将实例的元素删除掉</span></span><br><span class="line">      notify.el = <span class="literal">null</span> <span class="comment">//删掉DOM对象</span></span><br><span class="line">    &#125;, options.delay);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 导出这个包含install的对象，如果使用Vue.use就会调用这个install 方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> notify;</span><br></pre></td></tr></table></figure></p>
<p>main.js 中引用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> notify <span class="keyword">from</span> <span class="string">'./plugin/notify.js'</span>;</span><br><span class="line">Vue.use(notify,&#123;</span><br><span class="line">    delay:<span class="number">5000</span></span><br><span class="line">&#125;); <span class="comment">// 使用带有install的对象</span></span><br></pre></td></tr></table></figure></p>
<p><strong>使用</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//this.$notify()//默认值</span></span><br><span class="line"><span class="comment">//this.$notify('默认延时3s');</span></span><br><span class="line"><span class="keyword">this</span>.$notify(<span class="string">'自定义提示'</span>,&#123;<span class="attr">delay</span>:<span class="number">1000</span>&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="路由-1"><a href="#路由-1" class="headerlink" title="路由"></a>路由</h2><h3 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h3><p><code>&gt; npm i vue-router --save</code></p>
<p>router中的<strong>index.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'../components/Home.vue'</span>;</span><br><span class="line"><span class="keyword">import</span> List <span class="keyword">from</span> <span class="string">'../components/List.vue'</span>;</span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line">Vue.use(VueRouter); <span class="comment">// 和以前不一样的地方引入router必须使用use</span></span><br><span class="line"><span class="comment">// 注册一些全局的内容</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    routes:[</span><br><span class="line">        &#123;<span class="attr">path</span>:<span class="string">'/'</span>,<span class="attr">redirect</span>:<span class="string">'/home'</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>:<span class="string">'*'</span>,<span class="attr">redirect</span>:<span class="string">'/home'</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>:<span class="string">'/home'</span>,<span class="attr">component</span>:Home&#125;, </span><br><span class="line">        <span class="comment">//另外的写法&#123;path:'/home',component:()=&gt;import('../components/Home.vue')&#125;</span></span><br><span class="line">        &#123;<span class="attr">path</span>:<span class="string">'/list'</span>,<span class="attr">component</span>:List&#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>main.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  store,</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>组件中使用</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home"</span> <span class="attr">tag</span>=<span class="string">"button"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/list"</span> <span class="attr">tag</span>=<span class="string">"button"</span>&gt;</span>列表页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="router构建选项"><a href="#router构建选项" class="headerlink" title="router构建选项"></a>router构建选项</h3><h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: <span class="string">'/'</span>,</span><br><span class="line">  redirect: <span class="string">'/app'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="History-模式"><a href="#History-模式" class="headerlink" title="History 模式"></a>History 模式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  routes: [...]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>vue-router 默认 hash 模式 —— 使用 URL 的 hash 来模拟一个完整的 URL，于是当 URL 改变时，页面不会重新加载。</p>
<p>不过这种模式要玩好，还需要后台配置支持。因为我们的应用是个单页客户端应用，如果后台没有正确的配置，当用户在浏览器直接访问 <a href="http://oursite.com/user/id" target="_blank" rel="noopener">http://oursite.com/user/id</a> 就会返回 404，这就不好看了。</p>
<p>给个警告页：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'*'</span>, <span class="attr">component</span>: NotFoundComponent &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="base"><a href="#base" class="headerlink" title="base"></a>base</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: <span class="string">'/base/'</span>,</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/hello'</span>, <span class="attr">component</span>: hello &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>当访问localhost:8080/hello会变成localhost:8080/base/hello,所有的路由路径都会加上/base,当然手动删除/base还是可以打开页面</p>
<h4 id="linkActiveClass-和-linkExactActiveClass"><a href="#linkActiveClass-和-linkExactActiveClass" class="headerlink" title="linkActiveClass 和 linkExactActiveClass"></a>linkActiveClass 和 linkExactActiveClass</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/app"</span>&gt;</span>app<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/login"</span>&gt;</span>login<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>router-link在页面中会渲染成a标签，点击之后会添加两个类名:router-link-exact-active 和 router-link-active<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  linkActiveClass: <span class="string">'active-link'</span>,</span><br><span class="line">  linkExactActiveClass: <span class="string">'exact-active-link'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>这相当于是重新命名了两个类名。</p>
<p>两者的不同点：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/login"</span>&gt;</span>login<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/login/exact"</span>&gt;</span>login exact<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>上面这两个路由有一部分/login是相同的，在点击了login exact路由调转到<code>/login/exact</code>后：<br><code>/login</code> 上还保留了router-link-active类名</p>
<h4 id="scrollBehavior"><a href="#scrollBehavior" class="headerlink" title="scrollBehavior"></a>scrollBehavior</h4><p>使用前端路由，当切换到新路由时，想要页面滚到顶部，或者是保持原先的滚动位置，就像重新加载页面那样。</p>
<p>注意: 这个功能只在支持 history.pushState 的浏览器中可用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  scrollBehavior(to, form, savedPosition)&#123;</span><br><span class="line">    <span class="keyword">if</span> (savedPosition) &#123;</span><br><span class="line">      <span class="keyword">return</span> savedPosition</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  routes: [...]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>scrollBehavior 方法接收 to 和 from 路由对象。第三个参数 savedPosition 当且仅当 popstate 导航 (通过浏览器的 前进/后退 按钮触发) 时才可用。</p>
<h4 id="parseQuery-和-stringifyQuery"><a href="#parseQuery-和-stringifyQuery" class="headerlink" title="parseQuery 和 stringifyQuery"></a>parseQuery 和 stringifyQuery</h4><p>提供自定义查询字符串的解析/反解析函数。覆盖默认行为。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  parseQuery (query) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(query)</span><br><span class="line">  &#125;,</span><br><span class="line">  stringifyQuery (obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="fallback"><a href="#fallback" class="headerlink" title="fallback"></a>fallback</h4><p>当浏览器不支持 history.pushState 控制路由是否应该回退到 hash 模式。默认值为 true。</p>
<p>在 IE9 中，设置为 false 会使得每个 router-link 导航都触发整页刷新。它可用于工作在 IE9 下的服务端渲染应用，因为一个 hash 模式的 URL 并不支持服务端渲染。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  fallback: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><p><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#全局守卫" target="_blank" rel="noopener">官网文档</a></p>
<h3 id="路由元信息"><a href="#路由元信息" class="headerlink" title="路由元信息"></a>路由元信息</h3><p><a href="https://router.vuejs.org/zh/guide/advanced/meta.html" target="_blank" rel="noopener">官网文档</a><br>定义路由的时候可以配置 meta 字段：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/foo'</span>,</span><br><span class="line">      component: Foo,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'bar'</span>,</span><br><span class="line">          component: Bar,</span><br><span class="line">          <span class="comment">// a meta field</span></span><br><span class="line">          meta: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>那么如何访问这个 meta 字段呢？</p>
<p>首先，我们称呼 routes 配置中的每个路由对象为 路由记录。路由记录可以是嵌套的，因此，当一个路由匹配成功后，他可能匹配多个路由记录</p>
<p>例如，根据上面的路由配置，/foo/bar 这个 URL 将会匹配父路由记录以及子路由记录。</p>
<p>一个路由匹配到的所有路由记录会暴露为 $route 对象 (还有在导航守卫中的路由对象) 的 $route.matched 数组。因此，我们需要遍历 $route.matched 来检查路由记录中的 meta 字段。</p>
<p>下面例子展示在全局导航守卫中检查元字段：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.matched.some(<span class="function"><span class="params">record</span> =&gt;</span> record.meta.requiresAuth)) &#123;</span><br><span class="line">    <span class="comment">// this route requires auth, check if logged in</span></span><br><span class="line">    <span class="comment">// if not, redirect to login page.</span></span><br><span class="line">    <span class="keyword">if</span> (!auth.loggedIn()) &#123;</span><br><span class="line">      next(&#123;</span><br><span class="line">        path: <span class="string">'/login'</span>,</span><br><span class="line">        query: &#123; <span class="attr">redirect</span>: to.fullPath &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next() <span class="comment">// 确保一定要调用 next()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="命名视图"><a href="#命名视图" class="headerlink" title="命名视图"></a>命名视图</h3><p>在一个路由下展示多个视图组件,用的并不多<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 在这个页面中要分别展示三个视图</span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span> // 默认的</span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">"a"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span> // 视图a</span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">"b"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span> // 视图b</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      components: &#123; <span class="comment">// 加s</span></span><br><span class="line">        <span class="keyword">default</span>: Foo, <span class="comment">// 对应默认router-view</span></span><br><span class="line">        a: Bar, <span class="comment">// name = "a"</span></span><br><span class="line">        b: Baz <span class="comment">// name = "b"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h3><p>路由改变时，按顺序触发的钩子函数</p>
<h4 id="全局守卫"><a href="#全局守卫" class="headerlink" title="全局守卫"></a>全局守卫</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'before each invoked'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;)</span><br><span class="line">router.beforeResolve(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'before resolve invoked'</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>每个守卫方法接收三个参数：</p>
<ul>
<li><p><code>to: Route</code>: 即将要进入的目标 路由对象</p>
</li>
<li><p><code>from: Route</code>: 当前导航正要离开的 路由对象</p>
</li>
<li><p><code>next: Function</code>: 一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数。</p>
<ol>
<li><p>next(): 进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是 confirmed (确认的)。</p>
</li>
<li><p>next(false): 中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 from 路由对应的地址。</p>
</li>
<li><p>next(‘/‘) 或者 next({ path: ‘/‘ }): 跳转到一个不同的地址。当前的导航被中断，然后进行一个新的导航。你可以向 next 传递任意位置对象，且允许设置诸如 replace: true、name: ‘home’ 之类的选项以及任何用在 router-link 的 to prop 或 router.push 中的选项。</p>
</li>
<li><p>next(error): (2.4.0+) 如果传入 next 的参数是一个 Error 实例，则导航会被终止且该错误会被传递给 router.onError() 注册过的回调。</p>
</li>
</ol>
</li>
</ul>
<h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><p><a href="https://github.com/surmon-china/vue-awesome-swiper" target="_blank" rel="noopener">vue-轮播图教程</a></p>
<p><a href="http://www.swiper.com.cn/api/index2.html" target="_blank" rel="noopener">swiper教程</a></p>
<p><a href="https://wecy-chen.github.io/vue-demo/%E8%BD%AE%E6%92%AD%E5%9B%BE.html" target="_blank" rel="noopener">cdn例子</a></p>
<p><a href="https://github.com/wecy-chen/vue-demo/blob/master/%E8%BD%AE%E6%92%AD%E5%9B%BE.html" target="_blank" rel="noopener">例子代码</a></p>
<p><code>&gt;npm install vue-awesome-swiper --save</code></p>
<p>版本<code>&quot;vue-awesome-swiper&quot;: &quot;^3.1.3&quot;</code></p>
<p><strong>main.js</strong> 全局使用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入轮播图插件</span></span><br><span class="line"><span class="keyword">import</span> VueAwesomeSwiper <span class="keyword">from</span> <span class="string">'vue-awesome-swiper'</span>;</span><br><span class="line"><span class="comment">// 使用轮播图插件</span></span><br><span class="line">Vue.use(VueAwesomeSwiper);</span><br><span class="line"><span class="keyword">import</span> <span class="string">'swiper/dist/css/swiper.css'</span>;</span><br></pre></td></tr></table></figure></p>
<p><strong>或者在组件中使用</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// require styles</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'swiper/dist/css/swiper.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; swiper, swiperSlide &#125; <span class="keyword">from</span> <span class="string">'vue-awesome-swiper'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    swiper,</span><br><span class="line">    swiperSlide</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="swiper-vue"><a href="#swiper-vue" class="headerlink" title="swiper.vue"></a>swiper.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">:options</span>=<span class="string">"swiperOption"</span> <span class="attr">ref</span>=<span class="string">"mySwiper"</span> @<span class="attr">set-translate</span>=<span class="string">"onSetTranslate"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 滑动内容 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;swiper-slide&gt;I'm Slide 1&lt;/swiper-slide&gt; --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--    &lt;swiper-slide&gt;I'm Slide 2&lt;/swiper-slide&gt; --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--  &lt;swiper-slide&gt;I'm Slide 3&lt;/swiper-slide&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">swiper-slide</span> <span class="attr">v-for</span>=<span class="string">'i in imgs'</span> <span class="attr">:key</span>=<span class="string">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 选项 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-pagination"</span> <span class="attr">slot</span>=<span class="string">"pagination"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-button-prev"</span> <span class="attr">slot</span>=<span class="string">"button-prev"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-button-next"</span> <span class="attr">slot</span>=<span class="string">"button-next"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-scrollbar"</span> <span class="attr">slot</span>=<span class="string">"scrollbar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'carrousel'</span>,</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      imgs: [</span></span><br><span class="line"><span class="javascript">        <span class="string">'https://m.360buyimg.com/mobilecms/s1125x549_jfs/t11578/40/1816587279/47894/42dba539/5a0d36f7N149b127f.jpg!q70.jpg'</span>,</span></span><br><span class="line"><span class="javascript">        <span class="string">'https://img1.360buyimg.com/da/jfs/t14110/207/712950073/377098/a23521b1/5a129386N7f39c763.jpg'</span>,</span></span><br><span class="line"><span class="javascript">        <span class="string">'https://img1.360buyimg.com/da/jfs/t13657/160/507550199/94542/6e62a404/5a0d3658Nce159095.jpg'</span></span></span><br><span class="line"><span class="undefined">      ],</span></span><br><span class="line"><span class="undefined">      swiperOption: &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// some swiper options/callbacks</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 所有的参数同 swiper 官方 api 参数</span></span></span><br><span class="line"><span class="javascript">        pagination: &#123; <span class="comment">//分页</span></span></span><br><span class="line"><span class="javascript">          el: <span class="string">'.swiper-pagination'</span> <span class="comment">//class</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        navigation: &#123; <span class="comment">//左右按钮</span></span></span><br><span class="line"><span class="javascript">          nextEl: <span class="string">'.swiper-button-next'</span>,</span></span><br><span class="line"><span class="javascript">          prevEl: <span class="string">'.swiper-button-prev'</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        loop:<span class="literal">true</span> <span class="comment">//循环</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    swiper() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.$refs.mySwiper.swiper</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 然后你就可以使用当前上下文内的swiper对象去做你想做的事了</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.swiper)</span></span><br><span class="line"><span class="javascript">    <span class="comment">// this.swiper.slideTo(3, 1000, false) 跳转到第三张</span></span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="javascript">    onSetTranslate() &#123; <span class="comment">//swiper滑动触发</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'onSetTranslate'</span>)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">img &#123;</span></span><br><span class="line"><span class="undefined">  width: 100%</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="mixins混入"><a href="#mixins混入" class="headerlink" title="mixins混入"></a>mixins混入</h2><p><a href="https://cn.vuejs.org/v2/guide/mixins.html" target="_blank" rel="noopener">教程</a></p>
<h2 id="本地存储"><a href="#本地存储" class="headerlink" title="本地存储"></a>本地存储</h2><p>安装</p>
<blockquote>
<p>npm install good-storage<br>版本 :<code>&quot;good-storage&quot;: &quot;^1.0.1&quot;</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">'good-storage'</span></span><br><span class="line">  methods:&#123;</span><br><span class="line">      setStorage()&#123; <span class="comment">//保存</span></span><br><span class="line">        storage.set(<span class="string">'XXX_KEY'</span>,<span class="string">'这是本地保存数据'</span>)</span><br><span class="line">        storage.set(<span class="string">'ARR_KEY'</span>,arr) <span class="comment">//保存数组</span></span><br><span class="line">      &#125;,</span><br><span class="line">      getStorage()&#123; <span class="comment">//获取</span></span><br><span class="line">        <span class="keyword">this</span>.msg=storage.get(<span class="string">'XXX_KEY'</span>)</span><br><span class="line">        <span class="keyword">this</span>.arr=storage.get(<span class="string">'ARR_KEY'</span>,[]) <span class="comment">//获取数组</span></span><br><span class="line">      &#125;,</span><br><span class="line">      removeStorage()&#123; <span class="comment">//删除</span></span><br><span class="line">        storage.remove(<span class="string">'XXX_KEY'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h1><p><a href="https://blog.csdn.net/webRunning/article/details/78652235" target="_blank" rel="noopener">教程</a></p>
<p><code>npm install axios -D</code><br>axios:可以配置,不能vue.use(axios)</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>src/api/<strong>index.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;</span><br><span class="line"><span class="comment">// 增加默认的请求的路径</span></span><br><span class="line"><span class="comment">// 拦截器</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">'http://localhost:3000'</span>;</span><br><span class="line">axios.interceptors.response.use(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> res.data; <span class="comment">// 在这里统一拦截结果 把结果处理成res.data</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 获取轮播图数据 , 返回的是一个promise对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> getSliders = <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/sliders'</span>).catch(<span class="function"><span class="params">e</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"服务器没打开"</span>,e)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><strong>建立服务器</strong><br>数据: (根目录)./mock/<strong>sliders.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=[  </span><br><span class="line">  <span class="string">'https://m.360buyimg.com/mobilecms/s1125x549_jfs/t11578/40/1816587279/47894/42dba539/5a0d36f7N149b127f.jpg!q70.jpg'</span>,</span><br><span class="line">  <span class="string">'https://img1.360buyimg.com/da/jfs/t14110/207/712950073/377098/a23521b1/5a129386N7f39c763.jpg'</span>,</span><br><span class="line">  <span class="string">'https://img1.360buyimg.com/da/jfs/t13657/160/507550199/94542/6e62a404/5a0d3658Nce159095.jpg'</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>根目录/mock/<strong>server.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">let</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//访问根地址:http://localhost:3000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取本地轮播图数据 </span></span><br><span class="line"><span class="keyword">let</span> sliders = <span class="built_in">require</span>(<span class="string">'./sliders'</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//设置请求头</span></span><br><span class="line">  res.setHeader(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"*"</span>);</span><br><span class="line">  res.setHeader(<span class="string">"Access-Control-Allow-Headers"</span>, <span class="string">"Content-Type,Content-Length, Authorization, Accept,X-Requested-With"</span>);</span><br><span class="line">  res.setHeader(<span class="string">"Access-Control-Allow-Methods"</span>, <span class="string">"PUT,POST,GET,DELETE,OPTIONS"</span>);</span><br><span class="line">  res.setHeader(<span class="string">"X-Powered-By"</span>, <span class="string">' 3.2.1'</span>)</span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">"OPTIONS"</span>) <span class="keyword">return</span> res.end(); <span class="comment">/*让options请求快速返回*/</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> &#123; pathname, query &#125; = url.parse(req.url, <span class="literal">true</span>); <span class="comment">// true把query转化成对象</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pathname === <span class="string">'/sliders'</span>) &#123; <span class="comment">// /sliders返回轮播图数据</span></span><br><span class="line">    res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/json;charset=utf8'</span>);</span><br><span class="line">    <span class="keyword">return</span> res.end(<span class="built_in">JSON</span>.stringify(sliders));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"http://localhost:3000"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>组件中使用</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'getData'</span>&gt;</span>获取轮播数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">//在build/webpack.base.conf.js 配置路径</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123;getSliders&#125; <span class="keyword">from</span> <span class="string">'@api/index.js'</span>  </span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  methods:&#123;</span></span><br><span class="line"><span class="javascript">     <span class="keyword">async</span> getData()&#123; <span class="comment">//异步获取数据</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> sliders=<span class="keyword">await</span> getSliders()</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(sliders) <span class="comment">//数据</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="axios-all方法"><a href="#axios-all方法" class="headerlink" title="axios.all方法"></a>axios.all方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> getSliders = <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/sliders'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 获取热门图书接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> getHotBook = <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/hot'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//axios.all</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> getAll = <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.all([getSliders(),getHotBook()]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>组件中使用</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;getAll&#125; <span class="keyword">from</span> <span class="string">'../api'</span>;</span><br><span class="line">   methods: &#123;</span><br><span class="line">          <span class="keyword">async</span> getData()&#123;</span><br><span class="line">            <span class="keyword">let</span> [sliders,hotBooks] = <span class="keyword">await</span> getAll();<span class="comment">// [sliders,books]</span></span><br><span class="line">            <span class="keyword">this</span>.sliders = sliders;</span><br><span class="line">            <span class="keyword">this</span>.hotBooks = hotBooks;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="axios拦截"><a href="#axios拦截" class="headerlink" title="axios拦截"></a>axios拦截</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios的一些配置，比如发送请求显示loading，请求回来loading消失之类的</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;  <span class="comment">//配置发送请求的信息</span></span><br><span class="line">  stores.dispatch(<span class="string">'showLoading'</span>)  </span><br><span class="line">  <span class="built_in">console</span>.log(config)</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以再vue中加入&lt;keep-alive&gt;加载的内容&lt;/keep-alive&gt;</span></span><br><span class="line"></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123; <span class="comment">//配置请求回来的信息</span></span><br><span class="line">  stores.dispatch(<span class="string">'hideLoading'</span>)</span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//axios.defaults.baseURL='http://localhost:8082/'; 设置请求的根路径</span></span><br><span class="line"><span class="comment">//axios.defaults.baseURL = (process.env.NODE_ENV !=='production' ? config.dev.httpUrl:config.build.httpUrl);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//axios.defaults.headers.post['Content-Type']= 'application/x-www-form-urlencoded';  //设置post头部默认信息</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$http = axios  <span class="comment">//其他页面在使用axios的时候直接  this.$http就可以了</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Object.keys(对象)  [1,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(<span class="string">"foo"</span>)); [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<h2 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h2><p><a href="https://blog.csdn.net/u012369271/article/details/72848102" target="_blank" rel="noopener">代理跨域proxy</a></p>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p><img src="/2018/06/21/vue/代理.jpg" alt="代理.jpg"></p>
<h1 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h1><p><a href="https://www.cnblogs.com/momozjm/p/7246087.html" target="_blank" rel="noopener">理解</a></p>
<p>安装<br><code>&gt; npm i vuex</code></p>
<p>例子 点击+1</p>
<p>store目录</p>
<p>–|index.js<br>–|state.js<br>–|getters.js<br>–|mutations-type.js<br>–|mutations.js<br>–|actions.js</p>
<p><strong>state.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state=&#123;</span><br><span class="line">  count:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> state</span><br></pre></td></tr></table></figure></p>
<p><strong>getter.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> count =<span class="function"><span class="params">state</span>=&gt;</span>state.count  <span class="comment">//获取state</span></span><br></pre></td></tr></table></figure></p>
<p><strong>mutation-type.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法常量</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> INCREMENT=<span class="string">"INCREMENT"</span></span><br></pre></td></tr></table></figure></p>
<p><strong>mutations.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">"./mutation-type"</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations=&#123;  <span class="comment">//方法</span></span><br><span class="line">  [types.INCREMENT](state)&#123;</span><br><span class="line">    state.count=state.count+<span class="number">1</span>  <span class="comment">//设置新state</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mutations</span><br></pre></td></tr></table></figure></p>
<p><strong>actions.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">'./mutation-type'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increment=<span class="function"><span class="keyword">function</span>(<span class="params">&#123;commit&#125;</span>)</span>&#123; </span><br><span class="line">  commit(types.INCREMENT)  <span class="comment">//提交方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>index.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">"vuex"</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">"./actions"</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> getters <span class="keyword">from</span> <span class="string">"./getters"</span></span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">"./state"</span></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">"./mutations"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> createLogger <span class="keyword">from</span> <span class="string">"vuex/dist/logger"</span> <span class="comment">//log</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> debug=process.env.NODE_ENV!==<span class="string">"production"</span><span class="comment">//开启调试</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  getters,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  strict:debug,</span><br><span class="line">  plugins:debug?[createLogger()]:[]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>main.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>组件中使用vuex</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'increment'</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'add'</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;mapGetters,mapActions,mapMutations&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"> computed:&#123;</span></span><br><span class="line"><span class="undefined">    ...mapGetters([</span></span><br><span class="line"><span class="javascript">      <span class="string">'count'</span></span></span><br><span class="line"><span class="undefined">    ])</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods:&#123;</span></span><br><span class="line"><span class="undefined">    ...mapActions([</span></span><br><span class="line"><span class="javascript">      <span class="string">'increment'</span></span></span><br><span class="line"><span class="undefined">      ]),</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      ...mapMutations(&#123; </span></span><br><span class="line"><span class="javascript">        <span class="string">'add'</span>:<span class="string">'INCREMENT'</span> <span class="comment">//改名</span></span></span><br><span class="line"><span class="undefined">      &#125;),</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="打包项目构建"><a href="#打包项目构建" class="headerlink" title="打包项目构建"></a>打包项目构建</h1><h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p><img src="/2018/06/21/vue/打包.jpg" alt="打包.jpg"></p>
<p><strong>修改打包文件名</strong><br><img src="/2018/06/21/vue/web_path.jpg" alt="web_path.jpg"></p>
<p>不放在服务器根目录访问</p>
<p>要修改<strong>config/index,js</strong><br> <code>build: { assetsPublicPath: &#39;./&#39;}</code></p>
<p><code>&gt; npm run build</code></p>
<p>生成dist文件夹—&gt;static文件夹和index.html</p>
<p>把static文件夹和index.html放在服务器server.js同文件内</p>
<p><strong>server.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">let</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//访问根地址:http://localhost:3000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取本地轮播图数据 </span></span><br><span class="line"><span class="keyword">let</span> sliders = <span class="built_in">require</span>(<span class="string">'./sliders'</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//设置请求头(打包不用设置)</span></span><br><span class="line">  <span class="comment">// res.setHeader("Access-Control-Allow-Origin", "*");</span></span><br><span class="line">  <span class="comment">// res.setHeader("Access-Control-Allow-Headers", "Content-Type,Content-Length, Authorization, Accept,X-Requested-With");</span></span><br><span class="line">  <span class="comment">// res.setHeader("Access-Control-Allow-Methods", "PUT,POST,GET,DELETE,OPTIONS");</span></span><br><span class="line">  <span class="comment">// res.setHeader("X-Powered-By", ' 3.2.1')</span></span><br><span class="line">  <span class="comment">// if (req.method == "OPTIONS") return res.end(); /*让options请求快速返回*/</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> &#123; pathname, query &#125; = url.parse(req.url, <span class="literal">true</span>); <span class="comment">// true把query转化成对象</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pathname === <span class="string">'/sliders'</span>) &#123; <span class="comment">// /sliders返回轮播图数据</span></span><br><span class="line">    res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/json;charset=utf8'</span>);</span><br><span class="line">    <span class="keyword">return</span> res.end(<span class="built_in">JSON</span>.stringify(sliders));</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">// 读取本地html放在服务器中; </span></span><br><span class="line">    fs.stat(<span class="string">'.'</span>+pathname,<span class="function"><span class="keyword">function</span> (<span class="params">err,stats</span>) </span>&#123; <span class="comment">//读取一个路径 /</span></span><br><span class="line">      <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        fs.createReadStream(<span class="string">'index.html'</span>).pipe(res);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stats.isDirectory())&#123;</span><br><span class="line">          <span class="keyword">let</span> p = <span class="built_in">require</span>(<span class="string">'path'</span>).join(<span class="string">'.'</span>+pathname,<span class="string">'./index.html'</span>);</span><br><span class="line">          fs.createReadStream(p).pipe(res);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          fs.createReadStream(<span class="string">'.'</span>+pathname).pipe(res);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"http://localhost:3000"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>运行 <code>&gt; node server.js</code></p>
<p>访问:<code>http://localhost:3000</code></p>
<h2 id="–report"><a href="#–report" class="headerlink" title="–report"></a>–report</h2><p><img src="/2018/06/21/vue/--report.jpg" alt="--report.jpg"></p>
<h2 id="图形字体错误"><a href="#图形字体错误" class="headerlink" title="图形字体错误"></a>图形字体错误</h2><p>使用 vue build 之后做网站请求，发现 woff 字体无法获取，调试发现：<br>真实路径应该是<br>xxx/static/fonts/icomoon.0125455.woff<br>浏览器实际加载路径为：<br>xxx/static/css/static/fonts/icomoon.0125455.woff<br>解决方法：<br>webpack 配置问题<br>在 <code>build/webpack.prod.conf.js</code>中 <code>extract :true</code> 改为 fasle即可。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line"> rules: utils.styleLoaders(&#123;</span><br><span class="line">   sourceMap: config.build.productionSourceMap,</span><br><span class="line">   extract: <span class="literal">false</span></span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="真机调试"><a href="#真机调试" class="headerlink" title="真机调试"></a>真机调试</h2><p><strong>第一种方法:</strong><br>打开package.json<br>添加<span style="color: red">–host 0.0.0.0</span><br><code>&quot;dev&quot;: &quot;webpack-dev-server --host 0.0.0.0 --inline --progress --config build/webpack.dev.conf.js&quot;</code></p>
<p>查看ip地址<br>打开cmd<br><code>&gt; ipconfig</code><br>访问 <a href="http://192.168.1.101:8080/#/home" target="_blank" rel="noopener">http://192.168.1.101:8080/#/home</a><br>如果白屏 不支持es6语法的话<br><code>&gt; npm install babel-polyfill --save</code></p>
<p><strong>第二种方法</strong><br>打开<code>config/index.js</code><br>修改host:<code>localhost</code>为ip地址</p>
<h2 id="使用时间过滤器"><a href="#使用时间过滤器" class="headerlink" title="使用时间过滤器"></a>使用时间过滤器</h2><p><img src="/2018/06/21/vue/date-fns.jpg" alt="date-fns"></p>
<h1 id="better-scroll"><a href="#better-scroll" class="headerlink" title="better-scroll"></a>better-scroll</h1><p>移动端的框架<br><a href="https://ustbhuangyi.github.io/better-scroll/#/examples/zh" target="_blank" rel="noopener">官网例子</a></p>
<p><a href="https://ustbhuangyi.github.io/better-scroll/doc/zh-hans/#better-scroll 是什么" target="_blank" rel="noopener">文档</a></p>
<h1 id="其他相关框架"><a href="#其他相关框架" class="headerlink" title="其他相关框架"></a>其他相关框架</h1><p><img src="/2018/06/21/vue/其他.jpg" alt="其他.jpg"></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>如果我的文章对您有帮助！有钱的捧个钱场，没钱的捧个人场，谢谢您！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="wecy-chen 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="wecy-chen 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/vue/" rel="tag"><i class="fa fa-tag"></i> vue</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/16/bootstrap/" rel="next" title="bootstrap">
                <i class="fa fa-chevron-left"></i> bootstrap
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/27/better-scroll/" rel="prev" title="better-scroll">
                better-scroll <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="wecy-chen" />
            
              <p class="site-author-name" itemprop="name">wecy-chen</p>
              <p class="site-description motion-element" itemprop="description">做最好的自己</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/wecy-chen" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:492090230@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://example.com/" title="Title" target="_blank">Title</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#vue-js"><span class="nav-number">1.</span> <span class="nav-text">vue.js</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#cdn"><span class="nav-number">1.1.</span> <span class="nav-text">cdn</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue和angular区别"><span class="nav-number">1.2.</span> <span class="nav-text">vue和angular区别?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是bower"><span class="nav-number">1.3.</span> <span class="nav-text">什么是bower?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用"><span class="nav-number">1.4.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM指令"><span class="nav-number">1.5.</span> <span class="nav-text">DOM指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#v-model-的修饰符"><span class="nav-number">1.5.1.</span> <span class="nav-text">v-model 的修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环"><span class="nav-number">1.5.2.</span> <span class="nav-text">循环</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#属性和方法"><span class="nav-number">1.6.</span> <span class="nav-text">属性和方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#data"><span class="nav-number">1.6.1.</span> <span class="nav-text">data</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组和对象的注意事项"><span class="nav-number">1.6.2.</span> <span class="nav-text">数组和对象的注意事项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#computed"><span class="nav-number">1.6.3.</span> <span class="nav-text">computed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#watch"><span class="nav-number">1.6.4.</span> <span class="nav-text">watch</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue实例-属性"><span class="nav-number">1.7.</span> <span class="nav-text">vue实例$属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nextTick"><span class="nav-number">1.7.1.</span> <span class="nav-text">$nextTick</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件"><span class="nav-number">1.8.</span> <span class="nav-text">事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#todo练习"><span class="nav-number">1.9.</span> <span class="nav-text">todo练习</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绑定属性的写法"><span class="nav-number">1.10.</span> <span class="nav-text">绑定属性的写法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模板"><span class="nav-number">1.11.</span> <span class="nav-text">模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue-extend"><span class="nav-number">1.12.</span> <span class="nav-text">vue.extend</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue-use"><span class="nav-number">1.13.</span> <span class="nav-text">Vue.use()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#provide-inject-跨级组件交互"><span class="nav-number">1.14.</span> <span class="nav-text">provide/inject 跨级组件交互</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组件Component"><span class="nav-number">1.15.</span> <span class="nav-text">组件Component</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生命周期"><span class="nav-number">1.16.</span> <span class="nav-text">生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过滤器"><span class="nav-number">1.17.</span> <span class="nav-text">过滤器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插件"><span class="nav-number">1.18.</span> <span class="nav-text">插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令"><span class="nav-number">1.19.</span> <span class="nav-text">指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插槽Slot"><span class="nav-number">1.20.</span> <span class="nav-text">插槽Slot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#具名插槽"><span class="nav-number">1.20.1.</span> <span class="nav-text">具名插槽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域插槽"><span class="nav-number">1.20.2.</span> <span class="nav-text">作用域插槽</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#动画-过渡"><span class="nav-number">1.21.</span> <span class="nav-text">动画 过渡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#过渡"><span class="nav-number">1.21.1.</span> <span class="nav-text">过渡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动画"><span class="nav-number">1.21.2.</span> <span class="nav-text">动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#同时使用和设置时长"><span class="nav-number">1.21.3.</span> <span class="nav-text">同时使用和设置时长</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引入动画插件"><span class="nav-number">1.21.4.</span> <span class="nav-text">引入动画插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Velocity-js"><span class="nav-number">1.21.5.</span> <span class="nav-text">Velocity.js</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由"><span class="nav-number">1.22.</span> <span class="nav-text">路由</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#路由嵌套"><span class="nav-number">1.22.1.</span> <span class="nav-text">路由嵌套</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#params参数"><span class="nav-number">1.22.2.</span> <span class="nav-text">params参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法"><span class="nav-number">1.22.3.</span> <span class="nav-text">方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动画缓存"><span class="nav-number">1.22.4.</span> <span class="nav-text">动画缓存</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#发布-订阅"><span class="nav-number">1.23.</span> <span class="nav-text">发布 订阅</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#emit"><span class="nav-number">1.23.1.</span> <span class="nav-text">emit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EventBus"><span class="nav-number">1.23.2.</span> <span class="nav-text">EventBus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何实现"><span class="nav-number">1.23.3.</span> <span class="nav-text">如何实现</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#demo例子"><span class="nav-number">2.</span> <span class="nav-text">demo例子</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#项目"><span class="nav-number">3.</span> <span class="nav-text">项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#开始"><span class="nav-number">3.1.</span> <span class="nav-text">开始</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用-1"><span class="nav-number">3.2.</span> <span class="nav-text">使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#package-json"><span class="nav-number">3.2.1.</span> <span class="nav-text">package.json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#eslint"><span class="nav-number">3.2.2.</span> <span class="nav-text">eslint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vue自定生成文件内容"><span class="nav-number">3.2.3.</span> <span class="nav-text">vue自定生成文件内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#兼容性"><span class="nav-number">3.2.4.</span> <span class="nav-text">兼容性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#loader"><span class="nav-number">3.2.5.</span> <span class="nav-text">loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引入bootstrap"><span class="nav-number">3.2.6.</span> <span class="nav-text">引入bootstrap</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图标"><span class="nav-number">3.3.</span> <span class="nav-text">图标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UI组件"><span class="nav-number">3.4.</span> <span class="nav-text">UI组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#elementUI"><span class="nav-number">3.4.1.</span> <span class="nav-text">elementUI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#minti-u"><span class="nav-number">3.4.2.</span> <span class="nav-text">minti-u</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插件-1"><span class="nav-number">3.5.</span> <span class="nav-text">插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由-1"><span class="nav-number">3.6.</span> <span class="nav-text">路由</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-2"><span class="nav-number">3.6.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#router构建选项"><span class="nav-number">3.6.2.</span> <span class="nav-text">router构建选项</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#重定向"><span class="nav-number">3.6.2.1.</span> <span class="nav-text">重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#History-模式"><span class="nav-number">3.6.2.2.</span> <span class="nav-text">History 模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#base"><span class="nav-number">3.6.2.3.</span> <span class="nav-text">base</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#linkActiveClass-和-linkExactActiveClass"><span class="nav-number">3.6.2.4.</span> <span class="nav-text">linkActiveClass 和 linkExactActiveClass</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#scrollBehavior"><span class="nav-number">3.6.2.5.</span> <span class="nav-text">scrollBehavior</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#parseQuery-和-stringifyQuery"><span class="nav-number">3.6.2.6.</span> <span class="nav-text">parseQuery 和 stringifyQuery</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fallback"><span class="nav-number">3.6.2.7.</span> <span class="nav-text">fallback</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文档"><span class="nav-number">3.6.3.</span> <span class="nav-text">文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由元信息"><span class="nav-number">3.6.4.</span> <span class="nav-text">路由元信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命名视图"><span class="nav-number">3.6.5.</span> <span class="nav-text">命名视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#导航守卫"><span class="nav-number">3.6.6.</span> <span class="nav-text">导航守卫</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#全局守卫"><span class="nav-number">3.6.6.1.</span> <span class="nav-text">全局守卫</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#轮播图"><span class="nav-number">3.7.</span> <span class="nav-text">轮播图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#swiper-vue"><span class="nav-number">3.7.1.</span> <span class="nav-text">swiper.vue</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mixins混入"><span class="nav-number">3.8.</span> <span class="nav-text">mixins混入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本地存储"><span class="nav-number">3.9.</span> <span class="nav-text">本地存储</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#axios"><span class="nav-number">4.</span> <span class="nav-text">axios</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#例子"><span class="nav-number">4.1.</span> <span class="nav-text">例子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#axios-all方法"><span class="nav-number">4.2.</span> <span class="nav-text">axios.all方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#axios拦截"><span class="nav-number">4.3.</span> <span class="nav-text">axios拦截</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#跨域"><span class="nav-number">4.4.</span> <span class="nav-text">跨域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代理"><span class="nav-number">4.5.</span> <span class="nav-text">代理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vuex"><span class="nav-number">5.</span> <span class="nav-text">vuex</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#打包项目构建"><span class="nav-number">6.</span> <span class="nav-text">打包项目构建</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#打包"><span class="nav-number">6.1.</span> <span class="nav-text">打包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#–report"><span class="nav-number">6.2.</span> <span class="nav-text">–report</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图形字体错误"><span class="nav-number">6.3.</span> <span class="nav-text">图形字体错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#真机调试"><span class="nav-number">6.4.</span> <span class="nav-text">真机调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用时间过滤器"><span class="nav-number">6.5.</span> <span class="nav-text">使用时间过滤器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#better-scroll"><span class="nav-number">7.</span> <span class="nav-text">better-scroll</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他相关框架"><span class="nav-number">8.</span> <span class="nav-text">其他相关框架</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wecy-chen</span>

  
</div>

<!--
  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>
-->



        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访问数 <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量 <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'ecRg4iftynnr5IgRPWLzYcJF-gzGzoHsz',
        appKey: 'coG5syaR9bPvTBf72C8GYpIh',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
